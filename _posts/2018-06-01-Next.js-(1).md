---
layout: post
title: "Next.js (1)"
date: 2018-06-01 09:00:00 -0100
categories: development
---

## First things first

### See [next.js](https://nextjs.org/docs/#setup) for more. 

### Make package.json 
```
npm init
```

## Install packages 
```
npm install --save next react react-dom

> uglifyjs-webpack-plugin@0.4.6 postinstall /home/ubuntu/workspace/node_modules/webpack/node_modules/uglifyjs-webpack-plugin
> node lib/post_install.js

nexting@1.0.0 /home/ubuntu/workspace
├─┬ next@6.0.3 
│ ├─┬ @babel/core@7.0.0-beta.42 
│ │ ├─┬ @babel/code-frame@7.0.0-beta.42 
│ │ │ └─┬ @babel/highlight@7.0.0-beta.42 
│ │ │   └─┬ chalk@2.4.1 
│ │ │     ├─┬ ansi-styles@3.2.1 
│ │ │     │ └─┬ color-convert@1.9.1 
│ │ │     │   └── color-name@1.1.3 
│ │ │     └─┬ supports-color@5.4.0 
│ │ │       └── has-flag@3.0.0 
│ │ ├─┬ @babel/generator@7.0.0-beta.42 
│ │ │ ├── jsesc@2.5.1 
│ │ │ └── trim-right@1.0.1 


.....DONE

```

## Add scripts to `package.json`
```
{
  "scripts": {
    "dev": "next",
    "build": "next build",
    "start": "next start"
  }
}

copy to package.json:

{
  "name": "nexting",
  "version": "1.0.0",
  "description": ",-----.,--.                  ,--. ,---.   ,--.,------.  ,------.     '  .--./|  | ,---. ,--.,--. ,-|  || o   \\  |  ||  .-.  \\ |  .---'     |  |    |  || .-. ||  ||  |' .-. |`..'  |  |  ||  |  \\  :|  `--,      '  '--'\\|  |' '-' ''  ''  '\\ `-' | .'  /   |  ||  '--'  /|  `---.      `-----'`--' `---'  `----'  `---'  `--'    `--'`-------' `------'     -----------------------------------------------------------------",
  "main": "index.js",
  "scripts": {
    "dev": "next",
    "build": "next build",
    "start": "next start"
  },
  "author": "",
  "license": "ISC"
}

```

## `npm run dev`
```
j031:~/workspace $ npm run dev

> nexting@1.0.0 dev /home/ubuntu/workspace
> next

 DONE  Compiled successfully in 2132ms                                                                                                 7:44:44 PM

> Ready on http://localhost:3000

```

But it was not working on [c9.io](c9.io) because c9.io supports port 8080 for Node.js development. So I did:

## `npm run dev -- -p 8080` or write `next -p 8080`
So inside `package.json`:
```
{
  "name": "nexting",
  "version": "1.0.0",
  "description": ",-----.,--.                  ,--. ,---.   ,--.,------.  ,------.     '  .--./|  | ,---. ,--.,--. ,-|  || o   \\  |  ||  .-.  \\ |  .---'     |  |    |  || .-. ||  ||  |' .-. |`..'  |  |  ||  |  \\  :|  `--,      '  '--'\\|  |' '-' ''  ''  '\\ `-' | .'  /   |  ||  '--'  /|  `---.      `-----'`--' `---'  `----'  `---'  `--'    `--'`-------' `------'     -----------------------------------------------------------------",
  "main": "index.js",
  "scripts": {
    "dev": "next -p 8080", --->>>>>>>>>> changed
    "build": "next build",
    "start": "next start"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "next": "^6.0.3",
    "react": "^16.4.0",
    "react-dom": "^16.4.0"
  }
}
```

and do `npm run dev`.

I see my website working:

[next.js website first test working](https://i.imgur.com/pbfE0iP.jpg)

## Creating a sample website
```javascript

See the <Head> tag. It's a built-in component. 

import Link from 'next/link' // imports link (react router)
import Head from 'next/head' // this imports the built-in component 'head'

export default () => (
  <div>
    <Head>
      <title>Joel's test site</title>
      <meta name="viewport" content="initial-scale=1.0, width=device-width" key="viewport" />
    </Head>
    <p>Hello world!</p>
  </div>
)
```

### But let's understand what's happening with `Link` and `Head` first
* [React router api](https://knowbody.github.io/react-router-docs/api/Link.html)
* [Where this example is from](https://github.com/zeit/next.js/tree/canary/examples/layout-component)

First, see the structure
```
j031:~/workspace/layout-component-app $ tree -L 2 -I node_modules
.
├── README.md
├── components
│   └── layout.js
├── package.json
└── pages
    ├── about.js
    ├── contact.js
    └── index.js

2 directories, 6 files
```

and the contents:

`layout.js`
```javascript
import Link from 'next/link'
import Head from 'next/head'

export default ({ children, title = 'This is the default title' }) => (
  <div>
    <Head>
      <title>{ title }</title>
      <meta charSet='utf-8' />
      <meta name='viewport' content='initial-scale=1.0, width=device-width' />
    </Head>
    <header>
      <nav>
        <Link href='/'><a>Home</a></Link> |
        <Link href='/about'><a>About</a></Link> |
        <Link href='/contact'><a>Contact</a></Link>
      </nav>
    </header>

    { children }

    <footer>
      {'I`m here to stay'}
    </footer>
  </div>
)

```

`about.js`
```javascript
import Layout from '../components/layout'

export default () => (
  <Layout title='About us'>
    <div>About us</div>
  </Layout>
)
```

`contact.js`
```javascript
import Layout from '../components/layout'

export default () => (
  <Layout title='Contact us'>
    <div>Contact</div>
  </Layout>
)
```

`index.js`
```javascript
import Layout from '../components/layout'

export default () => (
  <Layout>
    <div>Hello World.</div>
  </Layout>
)

```

And the rendered website is as follows:

`websiteRootUrl`
[webiste root url](https://i.imgur.com/X1eizx9.jpg)

`websiteRootUrl/contact`
[website contact page](https://i.imgur.com/DlnSYuU.jpg)

`websiteRootUrl/about`
[website about page](https://i.imgur.com/r3bP5Lt.jpg)