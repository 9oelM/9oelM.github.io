{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020-09-13--How-to-make-useSelector-not-a-disaster/","result":{"data":{"site":{"siteMetadata":{"title":"Joel's dev blog","author":"Joel Mun","siteUrl":"https://9oelm.github.io"}},"markdownRemark":{"id":"c66c32c7-d569-5728-9603-253f9b08ad21","excerpt":"Disclaimer: We will focus on  itself in this article, rather than third-party libraries like , because it’s out of scope of the article.  How was it like before…","html":"<p><em>Disclaimer</em>: We will focus on <code class=\"language-text\">useSelector</code> itself in this article, rather than third-party libraries like <code class=\"language-text\">reselect</code>, because it’s out of scope of the article. </p>\n<h1 id=\"how-was-it-like-before\" style=\"position:relative;\">How was it like before?<a href=\"#how-was-it-like-before\" aria-label=\"how was it like before permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>Now, before talking about <code class=\"language-text\">useSelector</code>, we need to know some background. Let’s go back to pre-function component era, where all we needed to care about were the <code class=\"language-text\">props</code>. Not so much you needed to do. Choices were <code class=\"language-text\">PureComponent</code> and <code class=\"language-text\">shouldComponentUpdate</code>. Nothing else. Like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> shouldShowRed<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SomeDiv</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React</span><span class=\"token punctuation\">.</span>PureComponent<span class=\"token operator\">&lt;</span>Props<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        width<span class=\"token operator\">:</span> <span class=\"token string\">'300px'</span><span class=\"token punctuation\">,</span>\n        height<span class=\"token operator\">:</span> <span class=\"token string\">'300px'</span><span class=\"token punctuation\">,</span>\n        background<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>shouldShowRed <span class=\"token operator\">?</span> <span class=\"token string\">'red'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'white'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      hi\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> SomeDiv<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Right. So if you make such component, this component is only going to update when <code class=\"language-text\">shouldShowRed</code> is changed. Otherwise, it is going to stay still even if its parent renders for some reason. It goes the same for <code class=\"language-text\">shouldComponentUpdate</code>; It just gives you additional tooling to specify your own method of telling the component when to update.</p>\n<h1 id=\"using-it-with-redux\" style=\"position:relative;\">Using it with redux?<a href=\"#using-it-with-redux\" aria-label=\"using it with redux permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>Again, using the component with redux was pretty straightforward too. Just create a container and pass states and dispatches (I didn’t write any <code class=\"language-text\">mapDispatchToProps</code> for the sake of simplicity) mapped as props: </p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// Presentational component (same as the above component)</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> shouldShowRed<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SomeDiv</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React</span><span class=\"token punctuation\">.</span>PureComponent<span class=\"token operator\">&lt;</span>Props<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        width<span class=\"token operator\">:</span> <span class=\"token string\">'300px'</span><span class=\"token punctuation\">,</span>\n        height<span class=\"token operator\">:</span> <span class=\"token string\">'300px'</span><span class=\"token punctuation\">,</span>\n        background<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>shouldShowRed <span class=\"token operator\">?</span> <span class=\"token string\">'red'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'white'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      hi\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> SomeDiv<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// container component</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> connect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Dispatch <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> SomeDiv <span class=\"token keyword\">from</span> <span class=\"token string\">'./SomeDiv'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Let's say that we have this redux root state</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">RootReduxState</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">readonly</span> conditions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">readonly</span> shouldShowRed<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">readonly</span> shouldShowGreen<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">readonly</span> shouldShowBlue<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapStateToProps</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n  state<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">readonly</span> shouldShowRed<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">[</span><span class=\"token string\">'conditions'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'shouldShowRed'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  state<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  shouldShowRed<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>shouldShowRed<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapStateToProps<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>SomeDiv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Right. Let’s assume that we have <code class=\"language-text\">RootReduxState</code> as we have seen from the code above. And this is just going to work so well. Nothing difficult here. <code class=\"language-text\">SomeDiv</code> will keep being efficient at its best because <code class=\"language-text\">PureComponent</code> is working well. But how should we precisely port this example to a function component?</p>\n<h1 id=\"function-component\" style=\"position:relative;\">Function component<a href=\"#function-component\" aria-label=\"function component permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>Well, it’s easy. Just use <code class=\"language-text\">useSelector</code>, Right?</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">const</span> SomeDiv<span class=\"token operator\">:</span> <span class=\"token function-variable function\">FC</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> shouldShowRed<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">.</span>shouldShowRed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        width<span class=\"token operator\">:</span> <span class=\"token string\">'300px'</span><span class=\"token punctuation\">,</span>\n        height<span class=\"token operator\">:</span> <span class=\"token string\">'300px'</span><span class=\"token punctuation\">,</span>\n        background<span class=\"token operator\">:</span> shouldShowRed <span class=\"token operator\">?</span> <span class=\"token string\">'red'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'white'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> \n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> SomeDiv<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Perfect. But what if you need more than just  <code class=\"language-text\">shouldShowRed</code>? The moment you start to get more than one thing from useSelector (which is a very normal case), you are going to need additional optimization efforts with appropriate knowledge.</p>\n<p>If we were to use <code class=\"language-text\">shouldShowGreen</code> too, we could choose:</p>\n<p><strong>Option 1</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  shouldShowRed<span class=\"token punctuation\">,</span>\n  shouldShowGreen<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">[</span><span class=\"token string\">'conditions'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> conditions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> shouldShowRed<span class=\"token punctuation\">,</span> shouldShowGreen <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  shouldShowRed<span class=\"token punctuation\">,</span> shouldShowGreen\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Or, we could:</p>\n<p><strong>Option 2</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    conditions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        shouldShowRed<span class=\"token punctuation\">,</span>\n        shouldShowGreen<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RootReduxState <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Alternatively:</p>\n<p><strong>Option 3</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> shouldShowRed<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">.</span>shouldShowRed<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> shouldShowGreen<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">.</span>shouldShowGreen<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Or, just a small variant..</p>\n<p><strong>Option 4</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> shouldShowRed<span class=\"token punctuation\">,</span> shouldShowGreen <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">[</span><span class=\"token string\">'conditions'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">)</span></code></pre></div>\n<h1 id=\"useselector\" style=\"position:relative;\">useSelector<a href=\"#useselector\" aria-label=\"useselector permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>Which method have you been using? Whichever one you are using, you should be able to give reasons! Now, before having a look at each option, let’s go back to <code class=\"language-text\">useSelector</code> and see what it does.</p>\n<p>So let me bring the most important thing to the table immediately: <code class=\"language-text\">useSelector</code> forces re-render of your component. It’s not a prop, but it can still make your component re-render. Really? Yes. Let’s look at <a href=\"https://react-redux.js.org/api/hooks#useselector\">the offical documentation</a>:</p>\n<blockquote>\n<p>When an action is dispatched, useSelector() will do a reference comparison of the previous selector result value and the current result value. <strong>If they are different, the component will be forced to re-render</strong>. If they are the same, the component will not re-render.</p>\n</blockquote>\n<p>So how do you judge if they are different? By running strict equality (<code class=\"language-text\">===</code>) comparision. (<a href=\"https://github.com/reduxjs/react-redux/blob/master/src/hooks/useSelector.js#L98\">Click here if you are feeling like looking at the official repo’s source code</a>). In the source code, <code class=\"language-text\">useSelector</code> by default uses a function called <code class=\"language-text\">refEquality</code>, and all it does is simply <a href=\"https://github.com/reduxjs/react-redux/blob/master/src/hooks/useSelector.js#L7\"><code class=\"language-text\">const refEquality = (a, b) =&gt; a === b</code></a>.</p>\n<p>This means that if you are returning an object from <code class=\"language-text\">useSelector</code> for whatever reason, <code class=\"language-text\">useSelector</code> will cause a re-render every time an action is dispatched from the store, simply because objects of the same structure (same keys and values) do not strictly equal each other in javascript. For example, <code class=\"language-text\">{ a: 1 } === { a: 1 }</code> is <code class=\"language-text\">false</code>. Official doc says the same:</p>\n<blockquote>\n<p>returning a new object every time will always <strong>force a re-render</strong> by default.</p>\n</blockquote>\n<p>Do they really force it? Yes. <a href=\"https://github.com/reduxjs/react-redux/blob/master/src/hooks/useSelector.js#L73\">From the source code</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> forceRender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>s <span class=\"token operator\">=></span> s <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> \n\n<span class=\"token operator\">...</span>\n\n<span class=\"token function\">forceRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>So… now, with this in our mind, let’s go back to the options we saw previously.</p>\n<h1 id=\"which-one-to-pick\" style=\"position:relative;\">Which one to pick<a href=\"#which-one-to-pick\" aria-label=\"which one to pick permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<h2 id=\"option-1\" style=\"position:relative;\">Option 1<a href=\"#option-1\" aria-label=\"option 1 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n  shouldShowRed<span class=\"token punctuation\">,</span>\n  shouldShowGreen<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">[</span><span class=\"token string\">'conditions'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> conditions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> shouldShowRed<span class=\"token punctuation\">,</span> shouldShowGreen <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  shouldShowRed<span class=\"token punctuation\">,</span> shouldShowGreen\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><em>Catches</em>:</p>\n<ol>\n<li>You are just writing a pair of <code class=\"language-text\">shouldShowRed</code> and <code class=\"language-text\">shouldShowGreen</code> for three times just to take the desired state out.</li>\n<li>This will cause a re-render forcefully every time an action is dispatched, because you are returning a new object from your selector.</li>\n</ol>\n<p><em>Verdict</em>: not good enough.</p>\n<h2 id=\"option-2\" style=\"position:relative;\">Option 2<a href=\"#option-2\" aria-label=\"option 2 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    conditions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        shouldShowRed<span class=\"token punctuation\">,</span>\n        shouldShowGreen<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RootReduxState <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><em>Catches</em>: you are returning the entire state from your selector, and destructuring it outside of the selector. This will too cause a re-render. What’s the point of having the selector callback if you intend to receive the entire state? This is a bad practice. It’s just tantamount to passing the entire state in <code class=\"language-text\">mapStateToProps</code>. You don’t do that there. So, why here?</p>\n<p><em>Verdict</em>: not good enough.</p>\n<h2 id=\"option-3\" style=\"position:relative;\">Option 3<a href=\"#option-3\" aria-label=\"option 3 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> shouldShowRed<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">.</span>shouldShowRed<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> shouldShowGreen<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">.</span>shouldShowGreen<span class=\"token punctuation\">)</span></code></pre></div>\n<p><em>Catches</em>: </p>\n<ol>\n<li>\n<p>you are calling <code class=\"language-text\">useSelector</code> twice, and this does not matter. According to the official doc:</p>\n<blockquote>\n<p>Because of the React update batching behavior used in React Redux v7, a dispatched action that causes multiple useSelector()s in the same component to return new values <strong>should only result in a single re-render</strong>.</p>\n</blockquote>\n</li>\n<li>strict equality is functioning as properly for each selected state because you are returning a primitive from each selector.</li>\n</ol>\n<p><em>Verdict</em>: usable.</p>\n<h2 id=\"option-4\" style=\"position:relative;\">Option 4:<a href=\"#option-4\" aria-label=\"option 4 permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> shouldShowRed<span class=\"token punctuation\">,</span> shouldShowGreen <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">[</span><span class=\"token string\">'conditions'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">)</span></code></pre></div>\n<p><em>Catches</em>: It’s just the same as option 1 or 2. It will cause a re-render too.</p>\n<p><em>Verdict</em>: Not good enough.</p>\n<h1 id=\"improving-the-bad-options\" style=\"position:relative;\">Improving the bad options<a href=\"#improving-the-bad-options\" aria-label=\"improving the bad options permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>Thankfully, redux gives us a chance to insert our own equality functions. The concept is the same <code class=\"language-text\">shouldComponentUpdate</code> or the equality callback in <code class=\"language-text\">React.memo</code>. We could do this:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> shouldShowRed<span class=\"token punctuation\">,</span> shouldShowGreen <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">[</span><span class=\"token string\">'conditions'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span>\n  <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> prev<span class=\"token punctuation\">.</span>shouldShowRed <span class=\"token operator\">===</span> next<span class=\"token punctuation\">.</span>shouldShowRed <span class=\"token operator\">&amp;&amp;</span> prev<span class=\"token punctuation\">.</span>shouldShowGreen <span class=\"token operator\">===</span> next<span class=\"token punctuation\">.</span>shouldShowGreen<span class=\"token punctuation\">)</span></code></pre></div>\n<p>or,</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> deepEqual <span class=\"token keyword\">from</span> <span class=\"token string\">'react-fast-compare'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> shouldShowRed<span class=\"token punctuation\">,</span> shouldShowGreen <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">[</span><span class=\"token string\">'conditions'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> RootReduxState<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> s<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">,</span> deepEqual<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Something like that. However you should really note that using <code class=\"language-text\">deepEqual</code> cannot ever be fast if you are trying to equal a large object (<a href=\"https://twitter.com/dan_abramov/status/1104414272753487872?s=20\">Dan Abramov said it, too!</a>):</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ffb5ac84c8114e90fff8d77440a24e5c/77800/dan.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 166.89189189189187%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"dan\"\n        title=\"dan\"\n        src=\"/static/ffb5ac84c8114e90fff8d77440a24e5c/fcda8/dan.png\"\n        srcset=\"/static/ffb5ac84c8114e90fff8d77440a24e5c/12f09/dan.png 148w,\n/static/ffb5ac84c8114e90fff8d77440a24e5c/e4a3f/dan.png 295w,\n/static/ffb5ac84c8114e90fff8d77440a24e5c/fcda8/dan.png 590w,\n/static/ffb5ac84c8114e90fff8d77440a24e5c/77800/dan.png 855w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Note also that you only want to run <code class=\"language-text\">deepEqual</code> on what you need. In the code snippet above, you are also comparing <code class=\"language-text\">shouldShowBlue</code> which is a part of <code class=\"language-text\">RootReduxState[&#39;conditions&#39;]</code>. But you don’t need that anyways, but you are still comparing it. Make sure you <em>select</em> and <em>compare</em> what you only need.</p>\n<h1 id=\"but-why-would-you-try-optimizing-it-in-the-first-place\" style=\"position:relative;\">But why would you try optimizing it in the first place?<a href=\"#but-why-would-you-try-optimizing-it-in-the-first-place\" aria-label=\"but why would you try optimizing it in the first place permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>Well, at first, it’s totally okay. Your app has ~100 components only, your redux state is quite shallow, and it does not take a long time to render whatever’s being rendered.</p>\n<p>The problem comes at two points:</p>\n<ol>\n<li><em>once you start to scale your application.</em> If you succeeed in making a popular application, you are going to support more features, and thus, need more components. Your components will be numerous, leading to the point where re-render of expensive components will be causing a sluggish interaction.</li>\n<li><em>once you start to care about users using low-end devices.</em> You want to support users with low-end spec computers. You want to support mobile devies with inherently less performance than most computers. Just get a 6x slowdown on your CPU from Chrome’s performance tool and try to see how long it takes for your components to react.</li>\n</ol>\n<h1 id=\"conclusion\" style=\"position:relative;\">Conclusion<a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>So far we looked at possible problems with using <code class=\"language-text\">useSelector</code> and how to solve them:</p>\n<ol>\n<li>If you are returning an object from your selector callback, it’s going to force re-render by default.</li>\n<li>To prevent re-render, either let your selector return a primitive type, or use a custom equality function.</li>\n</ol>\n<p>That’s it. Thank you!</p>","frontmatter":{"title":"How to make useSelector not a disaster","date":"September 13, 2020"}}},"pageContext":{"slug":"/2020-09-13--How-to-make-useSelector-not-a-disaster/","previous":{"fields":{"slug":"/2020-08-18--100BooksProject-(7):돈의-속성-(Properties-of-money)/"},"frontmatter":{"title":"100BooksProject: (7): 돈의 속성 (Properties of money)","tab":"post"}},"next":{"fields":{"slug":"/2020-09-26-100BooksProject-(8):두려움-없는-조직-(The-fearless-organization)/"},"frontmatter":{"title":"100BooksProject: (8): 두려움 없는 조직 (The fearless organization)","tab":"post"}}}},"staticQueryHashes":["3128451518","426816048"]}