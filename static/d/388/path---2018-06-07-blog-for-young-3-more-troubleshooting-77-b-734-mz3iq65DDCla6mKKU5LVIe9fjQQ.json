{"data":{"site":{"siteMetadata":{"title":"Joel's dev blog","author":"Joel Mun"}},"markdownRemark":{"id":"7b660795-d3ef-5825-84ab-a51a5b0b77c0","excerpt":"Error I kept getting this error, greatly increasing the loading speed for the website: Now the website looks like this right now But it keeps throwing me an…","html":"<h2>Error</h2>\n<p>I kept getting this error, greatly increasing the loading speed for the website:</p>\n<p>Now the website looks like this right now</p>\n<p><img src=\"https://i.imgur.com/XmhDPcL.png\" alt=\"Website now\"></p>\n<p>But it keeps throwing me an error. </p>\n<p>Everything loads perfectly except in regards to speed.</p>\n<p>So the error from the console is this one:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">grommet<span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">:</span><span class=\"token number\">1</span> Uncaught ReferenceError<span class=\"token punctuation\">:</span> React is not defined\n    at Object<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span>anonymous<span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>grommet<span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    at <span class=\"token function\">t</span> <span class=\"token punctuation\">(</span>grommet<span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    at Object<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span>anonymous<span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>grommet<span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">:</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span>\n    at <span class=\"token function\">t</span> <span class=\"token punctuation\">(</span>grommet<span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    at Object<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span>anonymous<span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>grommet<span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    at <span class=\"token function\">t</span> <span class=\"token punctuation\">(</span>grommet<span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    at grommet<span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">:</span><span class=\"token number\">1</span>\n    at grommet<span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">.</span>js<span class=\"token punctuation\">:</span><span class=\"token number\">1</span></code></pre></div>\n<p>and I found that this is related to.. either <code class=\"language-text\">import</code> or webpack:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/32070303/uncaught-referenceerror-react-is-not-defined\">might be webpack</a></li>\n<li><a href=\"https://teamtreehouse.com/community/solved-uncaught-reference-error-react-not-defined\">might be import problem</a></li>\n</ul>\n<p>And I think this link might help as well:</p>\n<ul>\n<li><a href=\"https://github.com/zeit/next.js/issues/1465\">github: importing jQuery in nextjs</a></li>\n<li><a href=\"https://github.com/grommet/next-sample\">github grommet sample</a></li>\n</ul>\n<p>These are the things that I have done to solve the problem:</p>\n<ol>\n<li>Check if all <code class=\"language-text\">.js</code> files that use <code class=\"language-text\">react</code> have <code class=\"language-text\">import</code> statements. </li>\n<li>Search more…</li>\n</ol>\n<p>And I found this:</p>\n<ol>\n<li>I was referring to <code class=\"language-text\">grommet.min.js</code> from a CDN. </li>\n<li>And this was not right, as this source was referring to <code class=\"language-text\">React</code> while it was just put inside <code class=\"language-text\">&lt;head&gt;</code> tag. It could not refer to <code class=\"language-text\">React</code>. </li>\n<li>So I did this to <code class=\"language-text\">_document.js</code>:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Document<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Head<span class=\"token punctuation\">,</span> Main<span class=\"token punctuation\">,</span> NextScript <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'next/document'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"../static/grommet-dxc.min.css\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"../static/style.css\"</span>\n<span class=\"token keyword\">import</span> Grommet <span class=\"token keyword\">from</span> <span class=\"token string\">\"grommet\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomDocument</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Document</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>html<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Head<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span><span class=\"token comment\">/* This is going to be your global head */</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span>link rel <span class=\"token operator\">=</span> <span class=\"token string\">\"stylesheet\"</span> href <span class=\"token operator\">=</span> <span class=\"token string\">\"/_next/static/style.css\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"viewport\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"width=device-width, initial-scale=1\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>link href<span class=\"token operator\">=</span><span class=\"token string\">\"https://fonts.googleapis.com/css?family=Work+Sans:300,400,700\"</span> rel<span class=\"token operator\">=</span><span class=\"token string\">\"stylesheet\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>script src <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>Grommet<span class=\"token punctuation\">.</span>grommetux<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Head<span class=\"token operator\">></span>\n        \n        <span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Main <span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* each routed page will go inside here */</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span>NextScript <span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* You don't have to care about this. */</span><span class=\"token punctuation\">}</span>\n          \n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now the project runs perfectly without the reference error!</p>\n<h2>Another error</h2>\n<p>Another one was this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">warning.js:33 Warning: Expected server HTML to contain a matching &lt;a&gt; in &lt;article&gt;.</code></pre></div>\n<p>well, this one…</p>\n<p>I found on github that this is just a warning and it does not show up on actualy production. So I ran the production server:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">next build\nnext start -p 8080 # c9.io only supports port 8080 for node.js</code></pre></div>\n<p>and no error happened. So all errors have been solved.</p>\n<h2>Another error after I installed eslint</h2>\n<p><a href=\"https://stackoverflow.com/questions/46840646/eslint-complaining-about-getinitialprops\">Solution on stackoverflow</a></p>\n<p>All things set correctly, I still got an error on <code class=\"language-text\">getInitialProps</code> when I ran eslint:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/home/ubuntu/workspace/pages/_error.js\n  6:16  error  Parsing error: Unexpected token getInitialProps\n\n✖ 1 problem (1 error, 0 warnings)</code></pre></div>\n<p>And so I installed <code class=\"language-text\">babel-eslint</code> and added this line in <code class=\"language-text\">.eslintrc.json</code>: </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;parser&quot;: &quot;babel-eslint&quot;,</code></pre></div>\n<p>and it complained no more. </p>","frontmatter":{"title":"Blog for Young (2): More troubleshooting","date":"June 07, 2018"}}},"pageContext":{"slug":"/2018-06-07--Blog-for-Young-(3):-More-troubleshooting/","previous":{"fields":{"slug":"/2018-06-05--Creating-music-player-(1):-setting-up/"},"frontmatter":{"title":"Creating music player (1): setting up"}},"next":{"fields":{"slug":"/2018-06-07--Using-npm/"},"frontmatter":{"title":"Using npm"}}}}