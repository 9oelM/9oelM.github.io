{"data":{"site":{"siteMetadata":{"title":"Joel's dev blog","author":"Joel Mun","siteUrl":"https://9oelm.github.io"}},"markdownRemark":{"id":"43fc7b3d-458d-52eb-b7b7-79cb98772a99","excerpt":"Types and objects Types in JS string number boolean null undefined object Built-in Objects String Number Boolean Object Function Array Date RegExp Error  and…","html":"<h2>Types and objects</h2>\n<h3>Types in JS</h3>\n<ul>\n<li>string</li>\n<li>number</li>\n<li>boolean</li>\n<li>null</li>\n<li>undefined</li>\n<li>object</li>\n</ul>\n<h3>Built-in Objects</h3>\n<ul>\n<li>String</li>\n<li>Number</li>\n<li>Boolean</li>\n<li>Object</li>\n<li>Function</li>\n<li>Array</li>\n<li>Date</li>\n<li>RegExp</li>\n<li>Error</li>\n</ul>\n<h3><code class=\"language-text\">String</code> and <code class=\"language-text\">string</code>, and other primitives</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> strPrimitive <span class=\"token operator\">=</span> <span class=\"token string\">\"I am a string\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typeof</span> strPrimitive<span class=\"token punctuation\">;</span>\t\t\t\t\t\t\t<span class=\"token comment\">// \"string\"</span>\nstrPrimitive <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">;</span>\t\t\t\t\t<span class=\"token comment\">// false</span>\n\n<span class=\"token keyword\">var</span> strObject <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"I am a string\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typeof</span> strObject<span class=\"token punctuation\">;</span> \t\t\t\t\t\t\t\t<span class=\"token comment\">// \"object\"</span>\nstrObject <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">;</span>\t\t\t\t\t<span class=\"token comment\">// true</span>\n\n<span class=\"token comment\">// inspect the object sub-type</span>\nObject<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>toString<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span> strObject <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// [object String]</span></code></pre></div>\n<p>Things we can know:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. `strPrimitive` is not created by `String` constructor, so it logs `false` on `instanceof String` test.\n2. `strObject` on the other hand is created by `String` constructor.\n3. `&quot;I am a string&quot;` is actually **not** an object but a primitive literal and immutable value. If you want to do something like `&quot;I am a string&quot;[0]&quot;` or `&quot;I am a string&quot;.substring(2,4)`, you are going to need a temporary `String` object.</code></pre></div>\n<p>The same logic applies for other objects with corresponding primitives, such as: <code class=\"language-text\">1</code> and <code class=\"language-text\">new Number(1)</code>.</p>\n<h3>Others</h3>\n<ul>\n<li><code class=\"language-text\">null</code> and <code class=\"language-text\">undefined</code> have no object wrappers. </li>\n<li><code class=\"language-text\">Object</code>, <code class=\"language-text\">Array</code>, <code class=\"language-text\">Function</code>, and <code class=\"language-text\">RegExp</code> are <strong>ALL OBJECTS</strong> regardless of whether the literal or constructed form is used (ex. <code class=\"language-text\">new Array()</code> and <code class=\"language-text\">[]</code>).</li>\n<li>Simpler literal form is preferred. Only use constructed form if you need extra options.</li>\n</ul>\n<h2>Contents</h2>\n<p>An object contains <strong>property names</strong> only that act as pointers (references) to where actual values are stored. </p>\n<h3>Two ways of accessing</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">testObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> a<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span>\n\ntestObject<span class=\"token punctuation\">.</span>a\n\ntestObject<span class=\"token punctuation\">[</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">.</code> and <code class=\"language-text\">[ ]</code> operator function the same. But their usage may vary: </p>\n<ul>\n<li><code class=\"language-text\">.</code> operator requires an <code class=\"language-text\">Identifier</code> compatible property name. </li>\n<li><code class=\"language-text\">[&quot;..&quot;]</code> operator can take any UTF-8 compatible string as the property name. (Ex. <code class=\"language-text\">[&quot;Hey++^]&quot;</code>)</li>\n<li>You can also extend the logic to make a property name where necessary (make a string first, and then use that as a property name)</li>\n<li>In objects, property names are always strings. <strong>If you use any other value besides a string (primitive) as the property, it will first be <em>converted</em> to a string.</strong> </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> myObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmyObject<span class=\"token punctuation\">[</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">;</span>\nmyObject<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"bar\"</span><span class=\"token punctuation\">;</span>\nmyObject<span class=\"token punctuation\">[</span>myObject<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"baz\"</span><span class=\"token punctuation\">;</span>\n\nmyObject<span class=\"token punctuation\">[</span><span class=\"token string\">\"true\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\t\t\t\t<span class=\"token comment\">// \"foo\"</span>\nmyObject<span class=\"token punctuation\">[</span><span class=\"token string\">\"3\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\t\t\t\t\t<span class=\"token comment\">// \"bar\"</span>\nmyObject<span class=\"token punctuation\">[</span><span class=\"token string\">\"[object Object]\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// \"baz\"</span></code></pre></div>\n<p>Notice that for the last property <code class=\"language-text\">myObject</code>, <code class=\"language-text\">toString</code> was called to fill the prop name.</p>\n<h3>You can also do this with <code class=\"language-text\">[&quot;..&quot;]</code></h3>\n<p>This is called “Computed property names”.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> prefix <span class=\"token operator\">=</span> <span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> myObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token punctuation\">[</span>prefix <span class=\"token operator\">+</span> <span class=\"token string\">\"bar\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">[</span>prefix <span class=\"token operator\">+</span> <span class=\"token string\">\"baz\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"world\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmyObject<span class=\"token punctuation\">[</span><span class=\"token string\">\"foobar\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// hello</span>\nmyObject<span class=\"token punctuation\">[</span><span class=\"token string\">\"foobaz\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// world</span></code></pre></div>\n<h2>Property vs Method</h2>\n<p>If a function belongs to an object (a class), it is referred to as a ‘method’ ion other languages. </p>\n<p>But technically, as we have seen, functions never <em>belong</em> to objects. </p>\n<p>If you access a property on an object, it is a property access but a method access.</p>\n<blockquote>\n<p><em>Perhaps</em> one could argue that a function becomes a method, not at definition time, but during run-time just for that invocation, depending on how it’s called at its call-site.</p>\n</blockquote>\n<blockquote>\n<p>The safest conclusion is probably that “function” and “method” are interchangeable in JavaScript.</p>\n</blockquote>\n<h2>Arrays</h2>\n<p>Arrays are objects, so they can have a property like</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> test <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\ntest<span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> <span class=\"token string\">\"hey\"</span>\n\ntest<span class=\"token punctuation\">.</span>length <span class=\"token comment\">// 2</span></code></pre></div>\n<p><code class=\"language-text\">test.a</code> does not add to the length of the array. It is just a property. </p>\n<p>But if you use a property name that looks like a number, <strong>it will be understood as a numeric index.</strong> </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> test <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\ntest<span class=\"token punctuation\">[</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"zero index\"</span>\ntest<span class=\"token punctuation\">[</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"first index\"</span>\ntest<span class=\"token punctuation\">.</span>length <span class=\"token comment\">// 2</span></code></pre></div>\n<h2><code class=\"language-text\">Object.assign(...)</code> (also <code class=\"language-text\">({ ...objectName })</code>)</h2>\n<p><code class=\"language-text\">Object.assign</code> iterates over all the enumerable, owned keys on the source objects and copies them to the target object (on the LHS)</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Dog</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"name\"</span>\n    <span class=\"token punctuation\">}</span>   \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> testObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> person<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Joel\"</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> additionalObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> \n                        say<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n                        friends<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"E\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Q\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                        pet<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Dog</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Matt\"</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> newObj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// &lt;&lt;--- the target (newly created) object</span>\n    additionalObj<span class=\"token punctuation\">,</span>\n    testObj\n<span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newObj<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">/*\n    {say: ƒ, friends: Array(3), pet: Dog, person: \"Joel\"}\n*/</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newObj<span class=\"token punctuation\">.</span>say <span class=\"token operator\">===</span> additionalObj<span class=\"token punctuation\">.</span>say<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,\n</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newObj<span class=\"token punctuation\">.</span>friends <span class=\"token operator\">===</span> additionalObj<span class=\"token punctuation\">.</span>friends<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,\n</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newObj<span class=\"token punctuation\">.</span>pet <span class=\"token operator\">===</span> additionalObj<span class=\"token punctuation\">.</span>pet<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,\n</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newObj<span class=\"token punctuation\">.</span>person <span class=\"token operator\">===</span> testObj<span class=\"token punctuation\">.</span>person<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">/*  it shows that properties are copied via `=` assignment only.\n    true,\n    true,\n    true,\n    true\n*/</span></code></pre></div>\n<p>An alternative to <code class=\"language-text\">Object.assign(...)</code> is <code class=\"language-text\">{ ...objectName, ..}</code> syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Dog</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"name\"</span>\n    <span class=\"token punctuation\">}</span>   \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> testObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> person<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Joel\"</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> additionalObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> \n                        say<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n                        friends<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"E\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Q\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                        pet<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Dog</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Matt\"</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> newObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>testObj<span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>additionalObj\n    <span class=\"token comment\">// you can override properties here</span>\n    <span class=\"token comment\">// like, pet: new Dog(\"Sally\")</span>\n    <span class=\"token comment\">// Notice how simpler and clearer the syntax is!</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newObj<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">/*\n    {say: ƒ, friends: Array(3), pet: Dog, person: \"Joel\"}\n*/</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newObj<span class=\"token punctuation\">.</span>say <span class=\"token operator\">===</span> additionalObj<span class=\"token punctuation\">.</span>say<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,\n</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newObj<span class=\"token punctuation\">.</span>friends <span class=\"token operator\">===</span> additionalObj<span class=\"token punctuation\">.</span>friends<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,\n</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newObj<span class=\"token punctuation\">.</span>pet <span class=\"token operator\">===</span> additionalObj<span class=\"token punctuation\">.</span>pet<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,\n</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newObj<span class=\"token punctuation\">.</span>person <span class=\"token operator\">===</span> testObj<span class=\"token punctuation\">.</span>person<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">/*  it shows that properties are copied via `=` assignment only.\n    true,\n    true,\n    true,\n    true\n*/</span></code></pre></div>\n<h2>Property descriptors</h2>\n<p>From ES5 onwards, all properties are described in terms of a <strong>property descriptor</strong>.</p>\n<h3><code class=\"language-text\">Object.getOwnPropertyDescriptor()</code></h3>\n<p>Following on from the last example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Object<span class=\"token punctuation\">.</span><span class=\"token function\">getOwnPropertyDescriptor</span><span class=\"token punctuation\">(</span> newObj<span class=\"token punctuation\">,</span> <span class=\"token string\">\"friends\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// See you have three characteristics: writable, enumerable and configurable.</span>\n<span class=\"token comment\">// {value: Array(3), writable: true, enumerable: true, configurable: true}</span></code></pre></div>\n<h3><code class=\"language-text\">Object.defineProperty()</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> test <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span> test<span class=\"token punctuation\">,</span> <span class=\"token string\">\"myProp\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\tvalue<span class=\"token punctuation\">:</span> <span class=\"token string\">\"hey\"</span><span class=\"token punctuation\">,</span>\n\twritable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\tconfigurable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\tenumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ntest<span class=\"token punctuation\">.</span>myProp<span class=\"token punctuation\">;</span> <span class=\"token comment\">// hey</span></code></pre></div>\n<p>It’s just a difficult way of doing <code class=\"language-text\">var test = { myProp: &quot;hey&quot; }</code>. Just know that there’s a function called <code class=\"language-text\">Object.defineProperty()</code>.</p>\n<h3>Writable</h3>\n<p>You cannot chance a value of a property if you set <code class=\"language-text\">writable</code> as <code class=\"language-text\">false</code>. </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> test <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span> test<span class=\"token punctuation\">,</span> <span class=\"token string\">\"myProp\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\tvalue<span class=\"token punctuation\">:</span> <span class=\"token string\">\"hey\"</span><span class=\"token punctuation\">,</span>\n\twritable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\tconfigurable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\tenumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ntest<span class=\"token punctuation\">.</span>myProp <span class=\"token operator\">=</span> <span class=\"token string\">\"it cannot change\"</span><span class=\"token punctuation\">;</span>\n\ntest<span class=\"token punctuation\">.</span>myProp <span class=\"token comment\">// hey</span></code></pre></div>\n<p>Yeap. It does not change. </p>\n<p>If you <code class=\"language-text\">use strict</code>, you get an error by attempting to modify the value: </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">'use strict'</span>\n\n<span class=\"token keyword\">var</span> test <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span> test<span class=\"token punctuation\">,</span> <span class=\"token string\">\"myProp\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\tvalue<span class=\"token punctuation\">:</span> <span class=\"token string\">\"hey\"</span><span class=\"token punctuation\">,</span>\n\twritable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\tconfigurable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\tenumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ntest<span class=\"token punctuation\">.</span>myProp <span class=\"token operator\">=</span> <span class=\"token string\">\"it cannot change\"</span>\n<span class=\"token comment\">/*\nlogs:\n    Uncaught TypeError: Cannot assign to read only property 'myProp' of object '#&lt;Object>'\n*/</span></code></pre></div>\n<h3>Configurable</h3>\n<p>If it’s configurable, you can modify its descriptor definition using <code class=\"language-text\">defineProperty()</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> test <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span> test<span class=\"token punctuation\">,</span> <span class=\"token string\">\"myProp\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\tvalue<span class=\"token punctuation\">:</span> <span class=\"token string\">\"hey\"</span><span class=\"token punctuation\">,</span>\n\twritable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\tconfigurable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\tenumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span> test<span class=\"token punctuation\">,</span> <span class=\"token string\">\"myProp\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\tvalue<span class=\"token punctuation\">:</span> <span class=\"token string\">\"hey\"</span><span class=\"token punctuation\">,</span>\n\twritable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\tconfigurable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\tenumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\n<span class=\"token keyword\">delete</span> test<span class=\"token punctuation\">.</span>myProp <span class=\"token comment\">//fail</span>\ntest<span class=\"token punctuation\">.</span>myProp <span class=\"token comment\">// \"hey\". still here. not deleted. </span>\n<span class=\"token comment\">/*\n    Uncaught TypeError: Cannot redefine property: myProp\n    at Function.defineProperty (&lt;anonymous>)\n*/</span></code></pre></div>\n<p>As you might have noticed, it is just a one-way action, so it cannot be undone.</p>\n<h2>Immutability</h2>\n<h3>Object constant</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> myObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span> myObject<span class=\"token punctuation\">,</span> <span class=\"token string\">\"NOT_CHANGING\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    value<span class=\"token punctuation\">:</span> <span class=\"token string\">\"whatsup\"</span><span class=\"token punctuation\">,</span>\n    writable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    configurable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Effect: cannot be changed, redefined or deleted.</p>\n<h3>Prevent extensions</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> myObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    a<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">preventExtensions</span><span class=\"token punctuation\">(</span> myObject <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmyObject<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> <span class=\"token string\">\"something\"</span><span class=\"token punctuation\">;</span>\nmyObject<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span></code></pre></div>\n<p>Effect: prevent the object from being added to new properties. </p>\n<h3>Doing the above two things at once: <code class=\"language-text\">Object.seal(..)</code></h3>\n<p>It’s literally just that. It seals the object by calling <code class=\"language-text\">preventExtensions()</code> and making <code class=\"language-text\">configurable</code> property as <code class=\"language-text\">false</code>.</p>\n<h3>Doing one thing more: <code class=\"language-text\">Object.freeze(..)</code></h3>\n<p>Things it does:</p>\n<ul>\n<li><code class=\"language-text\">Object.seal(..)</code></li>\n<li>sets <code class=\"language-text\">writable</code> as <code class=\"language-text\">false</code></li>\n</ul>\n<h2><code class=\"language-text\">[[Get]]</code></h2>\n<p><code class=\"language-text\">myObject.myProp</code> works through <code class=\"language-text\">[[Get]]</code> operation. </p>\n<blockquote>\n<p>The default built-in <code class=\"language-text\">[[Get]]</code> operation for an object first inspects the object for a property of the requested name, and if it finds it, it will return the value accordingly.</p>\n</blockquote>\n<p>Otherwise it returns <code class=\"language-text\">undefined</code> for the requested property that is not found. </p>\n<h2><code class=\"language-text\">[[Put]]</code></h2>\n<p>Simple assignment like <code class=\"language-text\">let something = 1</code> would not just call <code class=\"language-text\">[[Put]]</code>. </p>\n<p>If a property is already present in an object:</p>\n<blockquote>\n<ol>\n<li>Is the property an accessor descriptor (see “Getters &#x26; Setters” section below)? If so, call the setter, if any.</li>\n<li>Is the property a data descriptor with <code class=\"language-text\">writable</code> of <code class=\"language-text\">false</code>? If so, silently fail in <code class=\"language-text\">non-strict mode</code>, or throw <code class=\"language-text\">TypeError</code> in <code class=\"language-text\">strict mode</code>.</li>\n<li>Otherwise, set the value to the existing property as normal.</li>\n</ol>\n</blockquote>\n<p>If a property is not present, it is more complex, which will be covered later. </p>\n<h2>Getters &#x26; Setters</h2>\n<p>You can override getters and setters like:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> myObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">get</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_a\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">set</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_a <span class=\"token operator\">=</span> val <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">></span> myObj<span class=\"token punctuation\">.</span>a\n    undefined\n<span class=\"token operator\">></span> myObj<span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n    <span class=\"token number\">4</span>\n<span class=\"token operator\">></span> myObj<span class=\"token punctuation\">.</span>a\n    <span class=\"token number\">3</span></code></pre></div>\n<h2>Existence</h2>\n<p>Distinguishing between <code class=\"language-text\">undefined</code> as a property and that as nothing.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> myObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    test<span class=\"token punctuation\">:</span> undefined\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//both would log undefined</span>\n\nmyObj<span class=\"token punctuation\">.</span>test <span class=\"token comment\">// undefined</span>\nmyObj<span class=\"token punctuation\">.</span>sofeiewagionweiogw <span class=\"token comment\">// undefined</span>\n\n<span class=\"token string\">\"test\"</span> <span class=\"token keyword\">in</span> myObj <span class=\"token comment\">// true</span>\n<span class=\"token string\">\"sofeiewagionweiogw\"</span> <span class=\"token keyword\">in</span> myObj <span class=\"token comment\">// false</span>\n\nmyObj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\nmyObj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sofeiewagionweiogw\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span></code></pre></div>\n<h3><code class=\"language-text\">in</code> vs <code class=\"language-text\">hasownProperty(..)</code></h3>\n<p><code class=\"language-text\">in</code>: checks the object itself and the prototype chain to see if the property is present in these by <strong>looking at the existence of the property name supplied</strong>.</p>\n<p><code class=\"language-text\">hasOwnProperty(..)</code> checks only the target object itself. It will NOT go over the prototype chain. </p>\n<h2>Enumeration</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> myObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>\n    myObject<span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// make `a` enumerable, as normal</span>\n    <span class=\"token punctuation\">{</span> enumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>\n    myObject<span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// make `b` NON-enumerable</span>\n    <span class=\"token punctuation\">{</span> enumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmyObject<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">\"b\"</span> <span class=\"token keyword\">in</span> myObject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nmyObject<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"b\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n\n<span class=\"token comment\">// .......</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> k <span class=\"token keyword\">in</span> myObject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> k<span class=\"token punctuation\">,</span> myObject<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// \"a\" 2</span></code></pre></div>\n<p>It’s just that <code class=\"language-text\">b</code> exists, but it does not get referred to inside <code class=\"language-text\">for..in</code> loop.</p>\n<ul>\n<li>You can check with <code class=\"language-text\">propertyIsEnumerable(..)</code> too see if the property name exists directly on the object and is enumerable.</li>\n<li><code class=\"language-text\">Object.keys(..)</code> returns an array of all enumerable properties. </li>\n<li><code class=\"language-text\">Object.getOwnPropertyNames(..)</code> returns an array of all properties regardless. Both <code class=\"language-text\">keys(..)</code> and <code class=\"language-text\">getOwnPropertyNames(..)</code> would inspect only the direct object. </li>\n</ul>\n<h2>Iteration</h2>\n<h3><code class=\"language-text\">for..in</code></h3>\n<p>iterates over enumerable properties on an object. You are getting the values directly. </p>\n<h3>Normal <code class=\"language-text\">(let i = 0; i &lt; arr.length; i++)</code> loop</h3>\n<p>iterates over indices to get values.  </p>\n<h3><code class=\"language-text\">forEach(..)</code></h3>\n<p>iterates over all values in an array, ignoring any callback return values. </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> test <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">return</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\ntest <span class=\"token comment\">// undefined. </span></code></pre></div>\n<h3><code class=\"language-text\">every(..)</code></h3>\n<p>iterates until the end or the callback returns a falsy value. </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">every</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">,</span>index<span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">return</span> index <span class=\"token operator\">==</span> <span class=\"token number\">2</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">/*\nlogs:\n3\n4\n5\n*/</span></code></pre></div>\n<h3><code class=\"language-text\">some(..)</code></h3>\n<p>reverse of <code class=\"language-text\">every(..)</code>. Iterates until the end or the callback returns a truthy value.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">arr<span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">,</span>index<span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">return</span> index <span class=\"token operator\">==</span> <span class=\"token number\">2</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">/*\nlogs:\n3\n*/</span></code></pre></div>\n<h3>Index order is not guaranteed</h3>\n<blockquote>\n<p>The order of iteration over an object’s properties is not guaranteed and may vary between different JS engines.</p>\n</blockquote>\n<h3><code class=\"language-text\">for..of</code></h3>","frontmatter":{"title":"This & Object prototypes (3): Objects","date":"June 30, 2018"}}},"pageContext":{"slug":"/2018-06-30--This-&-Object-prototypes-(3):-Objects/","previous":{"fields":{"slug":"/2018-06-30--Warnings-and-errors-in-npm/"},"frontmatter":{"title":"Warnings and errors in npm"}},"next":{"fields":{"slug":"/2018-07-29--Using-redux-thunk/"},"frontmatter":{"title":"Using redux-thunk"}}}}