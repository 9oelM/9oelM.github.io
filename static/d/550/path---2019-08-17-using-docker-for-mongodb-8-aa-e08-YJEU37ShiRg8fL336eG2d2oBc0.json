{"data":{"site":{"siteMetadata":{"title":"Joel's dev blog","author":"Joel Mun","siteUrl":"https://9oelm.github.io"}},"markdownRemark":{"id":"95724a03-2cad-592a-a661-4b8b93370a80","excerpt":"What am I going to do? So I have my university’s timetable data in excel: I want to read this data using exceljs + node + typescript, and then put it into…","html":"<h1>What am I going to do?</h1>\n<p>So I have my university’s timetable data in excel:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6173697441361701201e233ac5e1fa6d/d8ff6/excel-data.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 31.2385600976205%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABI0lEQVQY012QS2+CUBSE+f8/xY1swJqocSGuwZQ2CkRFlDdaFBDUTD2T2LQ9m/uYOd+Ze5V+v4/BYABVVTF8G2I0GkHTNei6zv1kMsF0OsV4PKZP0zT0ej3qc2MOwzAwm824ikfxfR91XSNJEjweDzRNg32wx/V6xe9q25a+qqrgeR7SNMX/kn5luVxS3Gw2KL9KREmM988PhIcDoZfLhbDT6URfHMewLAuO41Dvuo66rGVZQnEdF0VRQJKez2fkRQ73mUAa7/c7U0mDmPM8R5qkWCwWsG2baSXV7XajV4Yrq9WKxu12S6DA5UlRFNEoQJnOYVnOrzFNEzt/9wP6A/Rcj5AgCHgh+/V6jTAMmYzPajscj0dqWZYxoZylBPYCVs/+b1NUu35axin/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Excel data\"\n        title=\"\"\n        src=\"/static/6173697441361701201e233ac5e1fa6d/40fad/excel-data.png\"\n        srcset=\"/static/6173697441361701201e233ac5e1fa6d/707e9/excel-data.png 148w,\n/static/6173697441361701201e233ac5e1fa6d/649e0/excel-data.png 295w,\n/static/6173697441361701201e233ac5e1fa6d/40fad/excel-data.png 590w,\n/static/6173697441361701201e233ac5e1fa6d/b3fef/excel-data.png 885w,\n/static/6173697441361701201e233ac5e1fa6d/301c0/excel-data.png 1180w,\n/static/6173697441361701201e233ac5e1fa6d/b5a53/excel-data.png 1770w,\n/static/6173697441361701201e233ac5e1fa6d/d8ff6/excel-data.png 3278w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>I want to read this data using exceljs + node + typescript, and then put it into mongodb.</p>\n<p>I also want make docker images for my node app and mongodb, so that I can use <code class=\"language-text\">docker-compose</code> to orchestrate execution of them. </p>\n<p>The main reason I want to try out docker is just that <strong>I did not want to pollute my local OSX environment with mongodb data.</strong></p>\n<p>The steps below assume that you’ve already signed up for &#x26; installed docker on your environment. </p>\n<p>You can find the repo for this tutorial(?) <a href=\"https://github.com/hoxyjs/parser\">here</a>.</p>\n<p>So here it goes: </p>\n<h1>Basic workflows for mongodb on docker</h1>\n<p>This will detect that you have no mongo image on local, download it from online, and then run it on port <code class=\"language-text\">27017</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> ./data\n$ docker run -d -p 27017:27017 -v ~/data:/data/db mongo\n\nUnable to <span class=\"token function\">find</span> image <span class=\"token string\">'mongo:latest'</span> locally\nlatest: Pulling from library/mongo\n35c102085707: Pull complete\n251f5509d51d: Pull complete\n8e829fe70a46: Pull complete\n6001e1789921: Pull complete\n62fb80b8f88c: Pull complete\n76be8dc9ea13: Pull complete\nc73353d62de1: Pull complete\n9dfe7c37b46c: Pull complete\n1fdf813927b6: Pull complete\n87b9bd03dc66: Pull complete\n24c524d289d7: Pull complete\n306b575ddfff: Pull complete\nee1475733b36: Pull complete\nDigest: sha256:ec1fbbb3f75fdee7c3433ce2d5b8200e7c9916c57902023777bec5754da5e525\nStatus: Downloaded newer image <span class=\"token keyword\">for</span> mongo:latest\nd7e515cfe278d3dbc6b12634bcb85819c6d1da219c79026bf68e4b84b139a4da</code></pre></div>\n<p>This will show the list of <strong>running containers</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker container <span class=\"token function\">ls</span>\n\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                      NAMES\nd7e515cfe278        mongo               <span class=\"token string\">\"docker-entrypoint.s…\"</span>   12 minutes ago      Up 12 minutes       0.0.0.0:27017-<span class=\"token operator\">></span>27017/tcp   interesting_jepsen</code></pre></div>\n<p>This will list both inactive/active containers. Notice you’ve got one more than the previous command.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                      NAMES\n15d5921d8acb        mongo               &quot;docker-entrypoint.s…&quot;   20 minutes ago      Created                                        agitated_panini\nd7e515cfe278        mongo               &quot;docker-entrypoint.s…&quot;   21 minutes ago      Up 21 minutes       0.0.0.0:27017-&gt;27017/tcp   interesting_jepsen</code></pre></div>\n<p>Now, to access the mongo shell inside the container, you either have to use the id or the name of the container. As you can see from the output, the ID is <code class=\"language-text\">d7e515cfe278</code> and the name <code class=\"language-text\">interesting_jepsen</code> (I guess it’s auto-generated by docker). You could do:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker <span class=\"token function\">exec</span> -it d7e515cfe278 <span class=\"token function\">bash</span>\n<span class=\"token comment\"># or</span>\n$ docker <span class=\"token function\">exec</span> -it interesting-jepsen <span class=\"token function\">bash</span></code></pre></div>\n<p>to launch a bash terminal inside this docker image. <code class=\"language-text\">-it</code> flag is for <code class=\"language-text\">interactive</code> and <code class=\"language-text\">tty</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker <span class=\"token function\">exec</span> --help\n\nUsage:\tdocker <span class=\"token function\">exec</span> <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> CONTAINER COMMAND <span class=\"token punctuation\">[</span>ARG<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span>\n\nRun a <span class=\"token function\">command</span> <span class=\"token keyword\">in</span> a running container\n\nOptions:\n  -d, --detach               Detached mode: run <span class=\"token function\">command</span> <span class=\"token keyword\">in</span> the background\n      --detach-keys string   Override the key sequence <span class=\"token keyword\">for</span> detaching a container\n  -e, --env list             Set environment variables\n  -i, --interactive          Keep STDIN <span class=\"token function\">open</span> even <span class=\"token keyword\">if</span> not attached\n      --privileged           Give extended privileges to the <span class=\"token function\">command</span>\n  -t, --tty                  Allocate a pseudo-TTY\n  -u, --user string          Username or UID <span class=\"token punctuation\">(</span>format: <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">|</span>uid<span class=\"token operator\">></span><span class=\"token punctuation\">[</span>:<span class=\"token operator\">&lt;</span>group<span class=\"token operator\">|</span>gid<span class=\"token operator\">></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  -w, --workdir string       Working directory inside the container</code></pre></div>\n<p>Ok. so <code class=\"language-text\">interactive</code> means just interactive, and <code class=\"language-text\">pseudo-TTY</code> means:</p>\n<blockquote>\n<p>A device that has the functions of a physical terminal without actually being one. Created by terminal emulators such as xterm. (<a href=\"https://unix.stackexchange.com/questions/21147/what-are-pseudo-terminals-pty-tty\">ref</a>)</p>\n</blockquote>\n<p>So you are going to launch an interactive, virtual terminal. </p>\n<p>Anyways, that was the meaning of <code class=\"language-text\">-it</code> flag.</p>\n<p>IF you think the name <code class=\"language-text\">interesting-jepsen</code> is not good enough, change it:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker container <span class=\"token function\">rename</span> interesting_jepsen mongodb-test\n$ docker container <span class=\"token function\">ls</span>\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                      NAMES\nd7e515cfe278        mongo               <span class=\"token string\">\"docker-entrypoint.s…\"</span>   27 minutes ago      Up 27 minutes       0.0.0.0:27017-<span class=\"token operator\">></span>27017/tcp   mongodb-test</code></pre></div>\n<p>Yay. Anyhow, if you run this command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker <span class=\"token function\">exec</span> -it d7e515cfe278 <span class=\"token function\">bash</span>\n<span class=\"token comment\"># or</span>\n$ docker <span class=\"token function\">exec</span> -it interesting-jepsen<span class=\"token punctuation\">(</span>or mongodb-test<span class=\"token punctuation\">)</span> <span class=\"token function\">bash</span></code></pre></div>\n<p>it is going to give you a virtual bash terminal inside your terminal:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@d7e515cfe278:/<span class=\"token comment\">#</span></code></pre></div>\n<p>Now launch the mongo shell.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@d7e515cfe278:/<span class=\"token comment\"># mongo</span>\nMongoDB shell version v4.2.0\nconnecting to: mongodb://127.0.0.1:27017/?compressors<span class=\"token operator\">=</span>disabled<span class=\"token operator\">&amp;</span>gssapiServiceName<span class=\"token operator\">=</span>mongodb\nImplicit session: session <span class=\"token punctuation\">{</span> <span class=\"token string\">\"id\"</span> <span class=\"token keyword\">:</span> UUID<span class=\"token punctuation\">(</span><span class=\"token string\">\"81bef6b1-53be-4155-a014-cc846fba16ef\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\nMongoDB server version: 4.2.0\nServer has startup warnings:\n2019-08-17T12:42:58.181+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span>\n2019-08-17T12:42:58.181+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> ** WARNING: Access control is not enabled <span class=\"token keyword\">for</span> the database.\n2019-08-17T12:42:58.181+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> **          Read and <span class=\"token function\">write</span> access to data and configuration is unrestricted.\n2019-08-17T12:42:58.181+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span>\n---\nEnable MongoDB's <span class=\"token function\">free</span> cloud-based monitoring service, <span class=\"token function\">which</span> will <span class=\"token keyword\">then</span> receive and display\nmetrics about your deployment <span class=\"token punctuation\">(</span>disk utilization, CPU, operation statistics, etc<span class=\"token punctuation\">)</span>.\n\nThe monitoring data will be available on a MongoDB website with a unique URL accessible to you\nand anyone you share the URL with. MongoDB may use this information to <span class=\"token function\">make</span> product\nimprovements and to suggest MongoDB products and deployment options to you.\n\nTo <span class=\"token function\">enable</span> <span class=\"token function\">free</span> monitoring, run the following command: db.enableFreeMonitoring<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nTo permanently disable this reminder, run the following command: db.disableFreeMonitoring<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n---</code></pre></div>\n<p>Now you see mongo’s working nicely. Let’s go make an image for my simple node app.</p>\n<h1>Using node with docker</h1>\n<p>This time I will going to create an image with my own node app.</p>\n<p>Here’s what my <code class=\"language-text\">index.ts</code> in my node app looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> to <span class=\"token keyword\">from</span> <span class=\"token string\">\"await-to-js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> dotenv <span class=\"token keyword\">from</span> <span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Excel <span class=\"token keyword\">from</span> <span class=\"token string\">\"exceljs\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> connect <span class=\"token keyword\">from</span> <span class=\"token string\">\"./connect\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Course<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>ICourse<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./course\"</span><span class=\"token punctuation\">;</span>\n\ndotenv<span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>err<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">to</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> workbook <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Excel<span class=\"token punctuation\">.</span>Workbook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> workbookFile <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> workbook<span class=\"token punctuation\">.</span>xlsx<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">DOCKER_ROOT_DIR</span> <span class=\"token operator\">||</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ROOT_DIR</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/assets/timetable.xlsx`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> worksheet <span class=\"token operator\">=</span> workbook<span class=\"token punctuation\">.</span><span class=\"token function\">getWorksheet</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    worksheet<span class=\"token punctuation\">.</span><span class=\"token function\">eachRow</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>row<span class=\"token punctuation\">:</span> Excel<span class=\"token punctuation\">.</span>Row<span class=\"token punctuation\">,</span> rowNumber<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rowNumber <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>_<span class=\"token punctuation\">,</span> term<span class=\"token punctuation\">,</span> acadCareer<span class=\"token punctuation\">,</span> courseCode<span class=\"token punctuation\">,</span> classSection<span class=\"token punctuation\">,</span> startDate<span class=\"token punctuation\">,</span> endDate<span class=\"token punctuation\">,</span> mon<span class=\"token punctuation\">,</span> tue<span class=\"token punctuation\">,</span> wed<span class=\"token punctuation\">,</span> thu<span class=\"token punctuation\">,</span> fri<span class=\"token punctuation\">,</span> sat<span class=\"token punctuation\">,</span> sun<span class=\"token punctuation\">,</span> venue<span class=\"token punctuation\">,</span> startTime<span class=\"token punctuation\">,</span> endTime<span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">,</span> offerDept<span class=\"token punctuation\">,</span> instructor<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=</span> row<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">const</span> course <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Course</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                term<span class=\"token punctuation\">,</span>\n                acadCareer<span class=\"token punctuation\">,</span>\n                courseCode<span class=\"token punctuation\">,</span>\n                classSection<span class=\"token punctuation\">,</span>\n                title<span class=\"token punctuation\">,</span>\n                offerDept<span class=\"token punctuation\">,</span>\n                instructor<span class=\"token punctuation\">:</span> instructor <span class=\"token operator\">&amp;&amp;</span> instructor<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\";\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> name<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">await</span> course<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Course created\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    Course<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> courses<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>courses<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>It’s simple. It will read from an Excel document some data and store it into mongodb.</p>\n<p>Now, to make your own image, you need a <code class=\"language-text\">Dockerfile</code> in the project root directory. <code class=\"language-text\">Dockerfile</code> specifies what will be included in your application container when it is executed. It defines your container environment. It’s a bit like <code class=\"language-text\">travis.yml</code> if you have used Travis. It’s just a set of instructions:</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\">FROM node:12\n# Create app directory &amp; set ownership on them to user &#39;node&#39;\nRUN mkdir -p /home/node/app/node_modules &amp;&amp; chown -R node:node /home/node/app\n# Set working directory\nWORKDIR /home/node/app\n# Install app dependencies\nCOPY package*.json ./\n# Ensure the current user is &#39;node&#39;\nUSER node\n# Install deps\nRUN npm install --save-dev yarn\nRUN /home/node/app/node_modules/.bin/yarn\n# Copy app source code with appropriate permissions\nCOPY --chown=node:node . .\n# Start application\nCMD [ &quot;npm&quot;, &quot;start&quot; ]</code></pre></div>\n<p>Also, just like git, there’s <code class=\"language-text\">.dockerignore</code>. Just add the ones you don’t want in your image:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">node_modules\nnpm-debug.log\nDockerfile\n.dockerignore\n.git\n.gitignore\ndist</code></pre></div>\n<p>Now you are ready to make an image. Run on bash:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker build -t your-dockerhub-id/node-test <span class=\"token keyword\">.</span>\n<span class=\"token comment\"># be in your project root where Dockerfile exists. </span></code></pre></div>\n<p>Then it is going to show you what it’s doing: </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Sending build context to Docker daemon  192.1MB\nStep 1/8 <span class=\"token keyword\">:</span> FROM node:12\n12: Pulling from library/node\n9cc2ad81d40d: Pull complete\ne6cb98e32a52: Pull complete\nae1b8d879bad: Pull complete\n42cfa3699b05: Pull complete\n053cac798c4e: Pull complete\ne11ff976ff71: Pull complete\n224731f6b161: Pull complete\n56ed10abd115: Pull complete\nf93be52154ee: Pull complete\nDigest: sha256:2eb5b7ee06215cda1c697c178978c51367b78ee3992a058f37b73616521fc104\nStatus: Downloaded newer image <span class=\"token keyword\">for</span> node:12\n ---<span class=\"token operator\">></span> e3e4ac3015dd\nStep 2/8 <span class=\"token keyword\">:</span> RUN <span class=\"token function\">mkdir</span> -p /home/node/app/node_modules <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">chown</span> -R node:node /home/node/app\n ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> 20d0454832aa\nRemoving intermediate container 20d0454832aa\n ---<span class=\"token operator\">></span> 3bc196dc1ba2\nStep 3/8 <span class=\"token keyword\">:</span> WORKDIR /home/node/app\n ---<span class=\"token operator\">></span> Running <span class=\"token keyword\">in</span> 13b04fa8b5e2\n\n<span class=\"token punctuation\">..</span>.\n\nSuccessfully built 6d852a03a2bf\nSuccessfully tagged 9oel/node-test:latest</code></pre></div>\n<p>Now the image’s ready. To see the built image:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED              SIZE\nmy-username/node-test      latest              069c8178498c        About a minute ago   1.26GB</code></pre></div>\n<p>Now you can create a container using this image. </p>\n<h2>Using node and mongo containers together with <code class=\"language-text\">docker-compose</code></h2>\n<p>Now we’ve got two images:</p>\n<ul>\n<li><code class=\"language-text\">node-test</code></li>\n<li><code class=\"language-text\">mongo</code></li>\n</ul>\n<p>You need something called <code class=\"language-text\">docker-compose</code> to define and run multiple containers together as one application. To do that, write out a <code class=\"language-text\">docker-compose.yml</code> in your project root:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># use docker-compose version 3</span>\n<span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># my custom service name</span>\n  <span class=\"token key atrule\">node</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> .\n      <span class=\"token key atrule\">dockerfile</span><span class=\"token punctuation\">:</span> Dockerfile\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> 9oel/node<span class=\"token punctuation\">-</span>test\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> unless<span class=\"token punctuation\">-</span>stopped\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"8080:8080\"</span>\n    <span class=\"token comment\"># for volume errors, refer to https://github.com/ClusterHQ/dvol/issues/67</span>\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> .<span class=\"token punctuation\">:</span>/home/node/app\n      <span class=\"token punctuation\">-</span> ./node_modules<span class=\"token punctuation\">:</span>/home/node/app/node_modules\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> DOCKER_ROOT_DIR=/home/node/app\n    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> mongo\n  <span class=\"token key atrule\">mongo</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mongo\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"27017:27017\"</span></code></pre></div>\n<p>Now we are ready to go. Set the directory to the project root, and then simply run (<code class=\"language-text\">docker-compose</code> is installed together with docker, as far as I know):</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker-compose up</code></pre></div>\n<p>It is going to show a lot of messages about how it’s doing:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker-compose up\nStarting parser_mongo_1 <span class=\"token punctuation\">..</span>. <span class=\"token keyword\">done</span>\nRecreating parser_node_1 <span class=\"token punctuation\">..</span>. <span class=\"token keyword\">done</span>\nAttaching to parser_mongo_1, parser_node_1\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.825+0000 I  CONTROL  <span class=\"token punctuation\">[</span>main<span class=\"token punctuation\">]</span> Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols <span class=\"token string\">'none'</span>\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.827+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> MongoDB starting <span class=\"token keyword\">:</span> pid<span class=\"token operator\">=</span>1 port<span class=\"token operator\">=</span>27017 dbpath<span class=\"token operator\">=</span>/data/db 64-bit host<span class=\"token operator\">=</span>614026340cb8\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.827+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> db version v4.2.0\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.827+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> <span class=\"token function\">git</span> version: a4b751dcf51dd249c5865812b390cfd1c0129c30\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.827+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> OpenSSL version: OpenSSL 1.1.1  11 Sep 2018\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.827+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> allocator: tcmalloc\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.827+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> modules: none\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.827+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> build environment:\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.827+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span>     distmod: ubuntu1804\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.828+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span>     distarch: x86_64\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.828+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span>     target_arch: x86_64\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.828+0000 I  CONTROL  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> options: <span class=\"token punctuation\">{</span> net: <span class=\"token punctuation\">{</span> bindIp: <span class=\"token string\">\"*\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.828+0000 W  STORAGE  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> Detected unclean <span class=\"token function\">shutdown</span> - /data/db/mongod.lock is not empty.\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:08.828+0000 I  STORAGE  <span class=\"token punctuation\">[</span>initandlisten<span class=\"token punctuation\">]</span> Detected data files <span class=\"token keyword\">in</span> /data/db created by the <span class=\"token string\">'wiredTiger'</span> storage engine, so setting the active storage engine to <span class=\"token string\">'wiredTiger'</span><span class=\"token keyword\">.</span>\n\n<span class=\"token punctuation\">..</span>.\n\nnode_1   <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span>node:30<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>DEP0005<span class=\"token punctuation\">]</span> DeprecationWarning: Buffer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> is deprecated due to security and usability issues. Please use the Buffer.alloc<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>, Buffer.allocUnsafe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>, or Buffer.from<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> methods instead.\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:23.485+0000 I  NETWORK  <span class=\"token punctuation\">[</span>listener<span class=\"token punctuation\">]</span> connection accepted from 172.18.0.3:59916 <span class=\"token comment\">#1 (1 connection now open)</span>\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:23.490+0000 I  NETWORK  <span class=\"token punctuation\">[</span>conn1<span class=\"token punctuation\">]</span> received client metadata from 172.18.0.3:59916 conn1: <span class=\"token punctuation\">{</span> driver: <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"nodejs\"</span>, version: <span class=\"token string\">\"3.2.7\"</span> <span class=\"token punctuation\">}</span>, os: <span class=\"token punctuation\">{</span> type: <span class=\"token string\">\"Linux\"</span>, name: <span class=\"token string\">\"linux\"</span>, architecture: <span class=\"token string\">\"x64\"</span>, version: <span class=\"token string\">\"4.9.184-linuxkit\"</span> <span class=\"token punctuation\">}</span>, platform: <span class=\"token string\">\"Node.js v12.8.1, LE, mongodb-core: 3.2.7\"</span> <span class=\"token punctuation\">}</span>\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:33.035+0000 I  SHARDING <span class=\"token punctuation\">[</span>conn1<span class=\"token punctuation\">]</span> Marking collection course.courses as collection version: <span class=\"token operator\">&lt;</span>unsharded<span class=\"token operator\">></span>\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:33.036+0000 I  STORAGE  <span class=\"token punctuation\">[</span>conn1<span class=\"token punctuation\">]</span> createCollection: course.courses with generated UUID: e5cf5691-7ebf-44a0-967a-065b94b2e4a6 and options: <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:33.049+0000 I  INDEX    <span class=\"token punctuation\">[</span>conn1<span class=\"token punctuation\">]</span> index build: <span class=\"token keyword\">done</span> building index _id_ on ns course.courses\nnode_1   <span class=\"token operator\">|</span> Course created\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:33.060+0000 I  NETWORK  <span class=\"token punctuation\">[</span>listener<span class=\"token punctuation\">]</span> connection accepted from 172.18.0.3:59918 <span class=\"token comment\">#2 (2 connections now open)</span>\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:33.064+0000 I  NETWORK  <span class=\"token punctuation\">[</span>conn2<span class=\"token punctuation\">]</span> received client metadata from 172.18.0.3:59918 conn2: <span class=\"token punctuation\">{</span> driver: <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"nodejs\"</span>, version: <span class=\"token string\">\"3.2.7\"</span> <span class=\"token punctuation\">}</span>, os: <span class=\"token punctuation\">{</span> type: <span class=\"token string\">\"Linux\"</span>, name: <span class=\"token string\">\"linux\"</span>, architecture: <span class=\"token string\">\"x64\"</span>, version: <span class=\"token string\">\"4.9.184-linuxkit\"</span> <span class=\"token punctuation\">}</span>, platform: <span class=\"token string\">\"Node.js v12.8.1, LE, mongodb-core: 3.2.7\"</span> <span class=\"token punctuation\">}</span>\nnode_1   <span class=\"token operator\">|</span> Course created\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:33.071+0000 I  NETWORK  <span class=\"token punctuation\">[</span>listener<span class=\"token punctuation\">]</span> connection accepted from 172.18.0.3:59920 <span class=\"token comment\">#3 (3 connections now open)</span>\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:33.072+0000 I  NETWORK  <span class=\"token punctuation\">[</span>conn3<span class=\"token punctuation\">]</span> received client metadata from 172.18.0.3:59920 conn3: <span class=\"token punctuation\">{</span> driver: <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"nodejs\"</span>, version: <span class=\"token string\">\"3.2.7\"</span> <span class=\"token punctuation\">}</span>, os: <span class=\"token punctuation\">{</span> type: <span class=\"token string\">\"Linux\"</span>, name: <span class=\"token string\">\"linux\"</span>, architecture: <span class=\"token string\">\"x64\"</span>, version: <span class=\"token string\">\"4.9.184-linuxkit\"</span> <span class=\"token punctuation\">}</span>, platform: <span class=\"token string\">\"Node.js v12.8.1, LE, mongodb-core: 3.2.7\"</span> <span class=\"token punctuation\">}</span>\nnode_1   <span class=\"token operator\">|</span> Course created\nnode_1   <span class=\"token operator\">|</span> Course created\nnode_1   <span class=\"token operator\">|</span> Course created\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:33.079+0000 I  NETWORK  <span class=\"token punctuation\">[</span>listener<span class=\"token punctuation\">]</span> connection accepted from 172.18.0.3:59922 <span class=\"token comment\">#4 (4 connections now open)</span>\nmongo_1  <span class=\"token operator\">|</span> 2019-08-19T06:40:33.079+0000 I  NETWORK  <span class=\"token punctuation\">[</span>conn4<span class=\"token punctuation\">]</span> received client metadata from 172.18.0.3:59922 conn4: <span class=\"token punctuation\">{</span> driver: <span class=\"token punctuation\">{</span> name: <span class=\"token string\">\"nodejs\"</span>, version: <span class=\"token string\">\"3.2.7\"</span> <span class=\"token punctuation\">}</span>, os: <span class=\"token punctuation\">{</span> type: <span class=\"token string\">\"Linux\"</span>, name: <span class=\"token string\">\"linux\"</span>, architecture: <span class=\"token string\">\"x64\"</span>, version: <span class=\"token string\">\"4.9.184-linuxkit\"</span> <span class=\"token punctuation\">}</span>, platform: <span class=\"token string\">\"Node.js v12.8.1, LE, mongodb-core: 3.2.7\"</span> <span class=\"token punctuation\">}</span>\nnode_1   <span class=\"token operator\">|</span> Course created\nnode_1   <span class=\"token operator\">|</span> Course created\nnode_1   <span class=\"token operator\">|</span> Course created\nnode_1   <span class=\"token operator\">|</span> Course created\n\n   <span class=\"token punctuation\">{</span>\nnode_1   <span class=\"token operator\">|</span>     instructor: <span class=\"token punctuation\">[</span>\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Chan,Wing Yan Camie'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Chang,Chuen Chung Raymond'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Cheung,Annie'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Ching,Yick Pang'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Chung,Sookja Kim'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Huen,Shing Yan Michael'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Tipoe,George Lim'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Yang,Jian'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Yip,Ka Fun Henry'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Yip,Sui Ping Vera'</span>\nnode_1   <span class=\"token operator\">|</span>     <span class=\"token punctuation\">]</span>,\nnode_1   <span class=\"token operator\">|</span>     _id: 5d5a44602e23e5001e7b4921,\nnode_1   <span class=\"token operator\">|</span>     term: <span class=\"token string\">'2019-20 Sem 1'</span>,\nnode_1   <span class=\"token operator\">|</span>     acadCareer: <span class=\"token string\">'UGME'</span>,\nnode_1   <span class=\"token operator\">|</span>     courseCode: <span class=\"token string\">'BBMS2004'</span>,\nnode_1   <span class=\"token operator\">|</span>     classSection: <span class=\"token string\">'1A'</span>,\nnode_1   <span class=\"token operator\">|</span>     title: <span class=\"token string\">'Introduction to Human Anatomy'</span>,\nnode_1   <span class=\"token operator\">|</span>     offerDept: <span class=\"token string\">'School of Biomedical Sciences'</span>,\nnode_1   <span class=\"token operator\">|</span>     schedules: <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>,\nnode_1   <span class=\"token operator\">|</span>     __v: 0\nnode_1   <span class=\"token operator\">|</span>   <span class=\"token punctuation\">}</span>,\nnode_1   <span class=\"token operator\">|</span>   <span class=\"token punctuation\">{</span>\nnode_1   <span class=\"token operator\">|</span>     instructor: <span class=\"token punctuation\">[</span>\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Chan,Wing Yan Camie'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Chang,Chuen Chung Raymond'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Cheung,Annie'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Ching,Yick Pang'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Chung,Sookja Kim'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Huen,Shing Yan Michael'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Tipoe,George Lim'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Yang,Jian'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Yip,Ka Fun Henry'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Yip,Sui Ping Vera'</span>\nnode_1   <span class=\"token operator\">|</span>     <span class=\"token punctuation\">]</span>,\nnode_1   <span class=\"token operator\">|</span>     _id: 5d5a44602e23e5001e7b4923,\nnode_1   <span class=\"token operator\">|</span>     term: <span class=\"token string\">'2019-20 Sem 1'</span>,\nnode_1   <span class=\"token operator\">|</span>     acadCareer: <span class=\"token string\">'UGME'</span>,\nnode_1   <span class=\"token operator\">|</span>     courseCode: <span class=\"token string\">'BBMS2004'</span>,\nnode_1   <span class=\"token operator\">|</span>     classSection: <span class=\"token string\">'1A'</span>,\nnode_1   <span class=\"token operator\">|</span>     title: <span class=\"token string\">'Introduction to Human Anatomy'</span>,\nnode_1   <span class=\"token operator\">|</span>     offerDept: <span class=\"token string\">'School of Biomedical Sciences'</span>,\nnode_1   <span class=\"token operator\">|</span>     schedules: <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>,\nnode_1   <span class=\"token operator\">|</span>     __v: 0\nnode_1   <span class=\"token operator\">|</span>   <span class=\"token punctuation\">}</span>,\nnode_1   <span class=\"token operator\">|</span>   <span class=\"token punctuation\">{</span>\nnode_1   <span class=\"token operator\">|</span>     instructor: <span class=\"token punctuation\">[</span>\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Chan,Wing Yan Camie'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Chang,Chuen Chung Raymond'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Cheung,Annie'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Ching,Yick Pang'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Chung,Sookja Kim'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Huen,Shing Yan Michael'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Tipoe,George Lim'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Yang,Jian'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Yip,Ka Fun Henry'</span>,\nnode_1   <span class=\"token operator\">|</span>       <span class=\"token string\">'Yip,Sui Ping Vera'</span>\nnode_1   <span class=\"token operator\">|</span>     <span class=\"token punctuation\">]</span>,\nnode_1   <span class=\"token operator\">|</span>     _id: 5d5a44602e23e5001e7b4924,\nnode_1   <span class=\"token operator\">|</span>     term: <span class=\"token string\">'2019-20 Sem 1'</span>,\nnode_1   <span class=\"token operator\">|</span>     acadCareer: <span class=\"token string\">'UGME'</span>,\nnode_1   <span class=\"token operator\">|</span>     courseCode: <span class=\"token string\">'BBMS2004'</span>,\nnode_1   <span class=\"token operator\">|</span>     classSection: <span class=\"token string\">'1A'</span>,\nnode_1   <span class=\"token operator\">|</span>     title: <span class=\"token string\">'Introduction to Human Anatomy'</span>,\nnode_1   <span class=\"token operator\">|</span>     offerDept: <span class=\"token string\">'School of Biomedical Sciences'</span>,\nnode_1   <span class=\"token operator\">|</span>     schedules: <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>,\nnode_1   <span class=\"token operator\">|</span>     __v: 0\nnode_1   <span class=\"token operator\">|</span>   <span class=\"token punctuation\">}</span>,</code></pre></div>\n<p>Yes! You can see the message <code class=\"language-text\">Course created</code> and some data from mongo, which is an output from my node application. </p>\n<p>You can check their status with these commands as well:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker-compose <span class=\"token function\">ps</span>\n     Name                   Command               State            Ports\n----------------------------------------------------------------------------------\nparser_mongo_1   docker-entrypoint.sh mongod      Up      0.0.0.0:27017-<span class=\"token operator\">></span>27017/tcp\nparser_node_1    docker-entrypoint.sh <span class=\"token function\">npm</span> start   Up      0.0.0.0:8080-<span class=\"token operator\">></span>8080/tcp</code></pre></div>\n<p>Now let’s enter the mongo shell inside the container to actually check for the data that has been inserted (<strong>Note</strong>: you should run this below command with the service status <strong>up</strong>)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker-compose <span class=\"token function\">exec</span> mongo <span class=\"token function\">bash</span>\nroot@614026340cb8:/<span class=\"token comment\"># </span></code></pre></div>\n<p><code class=\"language-text\">docker-compse</code> does not need <code class=\"language-text\">-it</code> flag like before when we ran <code class=\"language-text\">docker</code>. It’s just different. Now let’s start mongo to inspect the data:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker <span class=\"token function\">exec</span> -it parser_mongo_1 <span class=\"token function\">bash</span>\nroot@7970fbf8d42a:/<span class=\"token comment\"># mongo mongodb://mongo:27017/course</span>\n<span class=\"token operator\">></span> show dbs\nadmin    0.000GB\nconfig   0.000GB\ncourse   0.000GB\ncourses  0.000GB\nlocal    0.000GB\n<span class=\"token operator\">></span> db.stats<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token string\">\"db\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"course\"</span>,\n\t<span class=\"token string\">\"collections\"</span> <span class=\"token keyword\">:</span> 1,\n\t<span class=\"token string\">\"views\"</span> <span class=\"token keyword\">:</span> 0,\n\t<span class=\"token string\">\"objects\"</span> <span class=\"token keyword\">:</span> 45,\n\t<span class=\"token string\">\"avgObjSize\"</span> <span class=\"token keyword\">:</span> 459.8888888888889,\n\t<span class=\"token string\">\"dataSize\"</span> <span class=\"token keyword\">:</span> 20695,\n\t<span class=\"token string\">\"storageSize\"</span> <span class=\"token keyword\">:</span> 36864,\n\t<span class=\"token string\">\"numExtents\"</span> <span class=\"token keyword\">:</span> 0,\n\t<span class=\"token string\">\"indexes\"</span> <span class=\"token keyword\">:</span> 1,\n\t<span class=\"token string\">\"indexSize\"</span> <span class=\"token keyword\">:</span> 36864,\n\t<span class=\"token string\">\"scaleFactor\"</span> <span class=\"token keyword\">:</span> 1,\n\t<span class=\"token string\">\"fsUsedSize\"</span> <span class=\"token keyword\">:</span> 7696060416,\n\t<span class=\"token string\">\"fsTotalSize\"</span> <span class=\"token keyword\">:</span> 62725623808,\n\t<span class=\"token string\">\"ok\"</span> <span class=\"token keyword\">:</span> 1\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">></span> db.courses.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span> <span class=\"token string\">\"_id\"</span> <span class=\"token keyword\">:</span> ObjectId<span class=\"token punctuation\">(</span><span class=\"token string\">\"5d5a44602e23e5001e7b4920\"</span><span class=\"token punctuation\">)</span>, <span class=\"token string\">\"instructor\"</span> <span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"INSTRUCTOR\"</span> <span class=\"token punctuation\">]</span>, <span class=\"token string\">\"term\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"TERM\"</span>, <span class=\"token string\">\"acadCareer\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"ACAD_CAREER\"</span>, <span class=\"token string\">\"courseCode\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"COURSE CODE\"</span>, <span class=\"token string\">\"classSection\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"CLASS SECTION\"</span>, <span class=\"token string\">\"title\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"COURSE TITLE\"</span>, <span class=\"token string\">\"offerDept\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"OFFER DEPT\"</span>, <span class=\"token string\">\"schedules\"</span> <span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">]</span>, <span class=\"token string\">\"__v\"</span> <span class=\"token keyword\">:</span> 0 <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span> <span class=\"token string\">\"_id\"</span> <span class=\"token keyword\">:</span> ObjectId<span class=\"token punctuation\">(</span><span class=\"token string\">\"5d5a44602e23e5001e7b4921\"</span><span class=\"token punctuation\">)</span>, <span class=\"token string\">\"instructor\"</span> <span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"Chan,Wing Yan Camie\"</span>, <span class=\"token string\">\"Chang,Chuen Chung Raymond\"</span>, <span class=\"token string\">\"Cheung,Annie\"</span>, <span class=\"token string\">\"Ching,Yick Pang\"</span>, <span class=\"token string\">\"Chung,Sookja Kim\"</span>, <span class=\"token string\">\"Huen,Shing Yan Michael\"</span>, <span class=\"token string\">\"Tipoe,George Lim\"</span>, <span class=\"token string\">\"Yang,Jian\"</span>, <span class=\"token string\">\"Yip,Ka Fun Henry\"</span>, <span class=\"token string\">\"Yip,Sui Ping Vera\"</span> <span class=\"token punctuation\">]</span>, <span class=\"token string\">\"term\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"2019-20 Sem 1\"</span>, <span class=\"token string\">\"acadCareer\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"UGME\"</span>, <span class=\"token string\">\"courseCode\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"BBMS2004\"</span>, <span class=\"token string\">\"classSection\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"1A\"</span>, <span class=\"token string\">\"title\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"Introduction to Human Anatomy\"</span>, <span class=\"token string\">\"offerDept\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"School of Biomedical Sciences\"</span>, <span class=\"token string\">\"schedules\"</span> <span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">]</span>, <span class=\"token string\">\"__v\"</span> <span class=\"token keyword\">:</span> 0 <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span> <span class=\"token string\">\"_id\"</span> <span class=\"token keyword\">:</span> ObjectId<span class=\"token punctuation\">(</span><span class=\"token string\">\"5d5a44602e23e5001e7b4923\"</span><span class=\"token punctuation\">)</span>, <span class=\"token string\">\"instructor\"</span> <span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"Chan,Wing Yan Camie\"</span>, <span class=\"token string\">\"Chang,Chuen Chung Raymond\"</span>, <span class=\"token string\">\"Cheung,Annie\"</span>, <span class=\"token string\">\"Ching,Yick Pang\"</span>, <span class=\"token string\">\"Chung,Sookja Kim\"</span>, <span class=\"token string\">\"Huen,Shing Yan Michael\"</span>, <span class=\"token string\">\"Tipoe,George Lim\"</span>, <span class=\"token string\">\"Yang,Jian\"</span>, <span class=\"token string\">\"Yip,Ka Fun Henry\"</span>, <span class=\"token string\">\"Yip,Sui Ping Vera\"</span> <span class=\"token punctuation\">]</span>, <span class=\"token string\">\"term\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"2019-20 Sem 1\"</span>, <span class=\"token string\">\"acadCareer\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"UGME\"</span>, <span class=\"token string\">\"courseCode\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"BBMS2004\"</span>, <span class=\"token string\">\"classSection\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"1A\"</span>, <span class=\"token string\">\"title\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"Introduction to Human Anatomy\"</span>, <span class=\"token string\">\"offerDept\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"School of Biomedical Sciences\"</span>, <span class=\"token string\">\"schedules\"</span> <span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">]</span>, <span class=\"token string\">\"__v\"</span> <span class=\"token keyword\">:</span> 0 <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span> <span class=\"token string\">\"_id\"</span> <span class=\"token keyword\">:</span> ObjectId<span class=\"token punctuation\">(</span><span class=\"token string\">\"5d5a44602e23e5001e7b4924\"</span><span class=\"token punctuation\">)</span>, <span class=\"token string\">\"instructor\"</span> <span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"Chan,Wing Yan Camie\"</span>, <span class=\"token string\">\"Chang,Chuen Chung Raymond\"</span>, <span class=\"token string\">\"Cheung,Annie\"</span>, <span class=\"token string\">\"Ching,Yick Pang\"</span>, <span class=\"token string\">\"Chung,Sookja Kim\"</span>, <span class=\"token string\">\"Huen,Shing Yan Michael\"</span>, <span class=\"token string\">\"Tipoe,George Lim\"</span>, <span class=\"token string\">\"Yang,Jian\"</span>, <span class=\"token string\">\"Yip,Ka Fun Henry\"</span>, <span class=\"token string\">\"Yip,Sui Ping Vera\"</span> <span class=\"token punctuation\">]</span>, <span class=\"token string\">\"term\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"2019-20 Sem 1\"</span>, <span class=\"token string\">\"acadCareer\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"UGME\"</span>, <span class=\"token string\">\"courseCode\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"BBMS2004\"</span>, <span class=\"token string\">\"classSection\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"1A\"</span>, <span class=\"token string\">\"title\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"Introduction to Human Anatomy\"</span>, <span class=\"token string\">\"offerDept\"</span> <span class=\"token keyword\">:</span> <span class=\"token string\">\"School of Biomedical Sciences\"</span>, <span class=\"token string\">\"schedules\"</span> <span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">]</span>, <span class=\"token string\">\"__v\"</span> <span class=\"token keyword\">:</span> 0 <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>Yes, it works!</p>\n<p>So far we have looked at how to </p>\n<h2>Additionally useful docker commands</h2>\n<p>Remove containers:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker rm [container-name or container-id]</code></pre></div>\n<p>Remove images:</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\">docker rmi [image-name or image-id]</code></pre></div>","frontmatter":{"title":"Using docker and docker-compose to read data from excel to put it into mongodb","date":"August 17, 2019"}}},"pageContext":{"slug":"/2019-08-17--Using-docker-for-mongodb/","previous":{"fields":{"slug":"/2019-08-03--100BooksProject-(3):When-the-breath-becomes-air-(숨결이-바람-될-때)/"},"frontmatter":{"title":"100BooksProject: (3): When the breath becomes air (숨결이 바람 될 때)"}},"next":null}}