{"data":{"site":{"siteMetadata":{"title":"Joel's dev blog","author":"Joel Mun"}},"markdownRemark":{"id":"5fbbe9de-3d3b-5001-9cc1-31c8cef557a8","excerpt":"Prerequisites Have a recent version of node installed Install   globally Initialize serverless project To initialize it with a python  template , see moreâ€¦","html":"<h1>Prerequisites</h1>\n<ul>\n<li>\n<p>Have a recent version of node installed</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">nvm <span class=\"token function\">install</span> stable</code></pre></div>\n</li>\n<li>\n<p>Install <code class=\"language-text\">serverless</code> globally</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g serverless</code></pre></div>\n</li>\n</ul>\n<h1>Initialize serverless project</h1>\n<p>To initialize it with a python <a href=\"https://serverless.com/framework/docs/providers/aws/cli-reference/create/\">template</a>,</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless create --template aws-python3</code></pre></div>\n<p>see more templates <a href=\"https://serverless.com/framework/docs/providers/aws/cli-reference/create#available-templates\">from the documentation.</a></p>\n<p>Then you are gonna see something like</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Serverless: Generating boilerplate...\n _______                             __\n|   _   .-----.----.--.--.-----.----|  .-----.-----.-----.\n|   |___|  -__|   _|  |  |  -__|   _|  |  -__|__ --|__ --|\n|____   |_____|__|  \\___/|_____|__| |__|_____|_____|_____|\n|   |   |             The Serverless Application Framework\n|       |                           serverless.com, v1.39.0\n -------&#39;\n\nServerless: Successfully generated boilerplate for template: &quot;aws-python3&quot;\nServerless: NOTE: Please update the &quot;service&quot; property in serverless.yml with your service name</code></pre></div>\n<p>Successful!</p>\n<h1>Give permission to <code class=\"language-text\">serverless</code> cli on aws</h1>\n<h2>AWS Access keys</h2>\n<p>You need to create something called <em>AWS Access Keys</em>.</p>\n<ol>\n<li>\n<p>Head over to <a href=\"https://console.aws.amazon.com/iam/home\">Identity and Access Management home</a></p>\n</li>\n<li>\n<p>Browse to <a href=\"https://console.aws.amazon.com/iam/home#/users\">Users tab</a> and click <em>add user</em>.\n\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 97.10144927536231%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABsklEQVQ4y61U227iQAyd79rX/Yd+0D70C/aj2n2s+tJSRWWhpRBEbjOZa3JqG4ZShCqEsHJkZzI+sY8nUbiC3b06TMoosUopwVqLqqrQNA3W6zW89xiGASkx0glExBgRIvsE4wKsD7KmmJUJmKgsSyyXS3Rdh77vobWG6Q2M0RR30F1LsUFrI1xIlDnSNYofyXMRapQFyEIGJ2lt0BmHutFotIV2EZ3dwSW6H9D7AYbg47hvf094aI4kML3F/48GT8UHXt5rIeFEGwa4SCBvdwjpq0qVq8v6cNn7qg9wrgmhc060Yw0Zq9VKNIwhCAKBdba0z1on+zl2GZ6HkhBpiEKYJ81gos1mI1PvSMeqqiVm8JD4ed63jck7T5pSh8N4WsOc6EPEfD7HbDbDdDpFXdfyjI9X27Z74hC8EAfqQh1P+PAF3CoTTSYTFEUh5IvFQkil7V1XW7ivc5hJj8l5QLyZCXLVueWs3+HaN8JjOyXF2VM+JjpV7blQuLKpS6r4scJrkAwywC2u33L+fi8B/y8j5T8vHR7frEDxd3tJm/zL2GiPadnj5u8Dfv25x+/bf/gEkpXSGXsIP1MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Add user\"\n        title=\"\"\n        src=\"/static/83a303283d988a2c050cd02c9223e8fc/40fad/1.png\"\n        srcset=\"/static/83a303283d988a2c050cd02c9223e8fc/707e9/1.png 148w,\n/static/83a303283d988a2c050cd02c9223e8fc/649e0/1.png 295w,\n/static/83a303283d988a2c050cd02c9223e8fc/40fad/1.png 590w,\n/static/83a303283d988a2c050cd02c9223e8fc/b3fef/1.png 885w,\n/static/83a303283d988a2c050cd02c9223e8fc/819be/1.png 897w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  </p>\n</li>\n<li>\n<p>Click on <em>Attach existing policies directly</em> and <em>Create policy</em>.\nAdd the following <a href=\"https://gist.github.com/ServerlessBot/7618156b8671840a539f405dea2704c8\">json provided by <code class=\"language-text\">serverless</code> team</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n<span class=\"token property\">\"Statement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"apigateway:*\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:CancelUpdateStack\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:ContinueUpdateRollback\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:CreateChangeSet\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:CreateStack\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:CreateUploadBucket\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:DeleteStack\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:Describe*\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:EstimateTemplateCost\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:ExecuteChangeSet\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:Get*\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:List*\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:PreviewStackUpdate\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:UpdateStack\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:UpdateTerminationProtection\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"cloudformation:ValidateTemplate\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"dynamodb:CreateTable\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"dynamodb:DeleteTable\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"dynamodb:DescribeTable\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:AttachInternetGateway\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:AuthorizeSecurityGroupIngress\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:CreateInternetGateway\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:CreateNetworkAcl\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:CreateNetworkAclEntry\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:CreateRouteTable\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:CreateSecurityGroup\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:CreateSubnet\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:CreateTags\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:CreateVpc\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:DeleteInternetGateway\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:DeleteNetworkAcl\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:DeleteNetworkAclEntry\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:DeleteRouteTable\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:DeleteSecurityGroup\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:DeleteSubnet\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:DeleteVpc\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:Describe*\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:DetachInternetGateway\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ec2:ModifyVpcAttribute\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"events:DeleteRule\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"events:DescribeRule\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"events:ListRuleNamesByTarget\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"events:ListRules\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"events:ListTargetsByRule\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"events:PutRule\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"events:PutTargets\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"events:RemoveTargets\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iam:CreateRole\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iam:DeleteRole\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iam:DeleteRolePolicy\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iam:GetRole\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iam:PassRole\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iam:PutRolePolicy\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iot:CreateTopicRule\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iot:DeleteTopicRule\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iot:DisableTopicRule\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iot:EnableTopicRule\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"iot:ReplaceTopicRule\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"kinesis:CreateStream\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"kinesis:DeleteStream\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"kinesis:DescribeStream\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"lambda:*\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"logs:CreateLogGroup\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"logs:DeleteLogGroup\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"logs:DescribeLogGroups\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"logs:DescribeLogStreams\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"logs:FilterLogEvents\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"logs:GetLogEvents\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:CreateBucket\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:DeleteBucket\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:DeleteBucketPolicy\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:DeleteObject\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:DeleteObjectVersion\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:GetObject\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:GetObjectVersion\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:ListAllMyBuckets\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:ListBucket\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:PutBucketNotification\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:PutBucketPolicy\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:PutBucketTagging\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:PutBucketWebsite\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:PutEncryptionConfiguration\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"s3:PutObject\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:CreateTopic\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:DeleteTopic\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:GetSubscriptionAttributes\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:GetTopicAttributes\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:ListSubscriptions\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:ListSubscriptionsByTopic\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:ListTopics\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:SetSubscriptionAttributes\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:SetTopicAttributes\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:Subscribe\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"sns:Unsubscribe\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"states:CreateStateMachine\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"states:DeleteStateMachine\"</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Effect\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Allow\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"*\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"Version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2012-10-17\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>Click <em>Next</em> until you see <em>Create user</em>. Then, copy the <em>Access Key ID</em> and <em>Secret access key</em> to somewhere like notepad.</p>\n</li>\n<li>\n<p>Enter in the API keys</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">export</span> AWS_ACCESS_KEY_ID<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-key-here<span class=\"token operator\">></span>\n<span class=\"token function\">export</span> AWS_SECRET_ACCESS_KEY<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-secret-key-here<span class=\"token operator\">></span>\n<span class=\"token comment\"># AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY are now available for serverless to use</span></code></pre></div>\n</li>\n<li>\n<p>Deploy</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless deploy</code></pre></div>\n<p>Then you are gonna see </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Serverless: Packaging service<span class=\"token punctuation\">..</span>.\nServerless: Excluding development dependencies<span class=\"token punctuation\">..</span>.\nServerless: Creating Stack<span class=\"token punctuation\">..</span>.\nServerless: Checking Stack create progress<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>.\nServerless: Stack create finished<span class=\"token punctuation\">..</span>.\nServerless: Uploading CloudFormation <span class=\"token function\">file</span> to S3<span class=\"token punctuation\">..</span>.\nServerless: Uploading artifacts<span class=\"token punctuation\">..</span>.\nServerless: Uploading <span class=\"token function\">service</span> aws-python3.zip <span class=\"token function\">file</span> to S3 <span class=\"token punctuation\">(</span>1.97 KB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">..</span>.\nServerless: Validating template<span class=\"token punctuation\">..</span>.\nServerless: Updating Stack<span class=\"token punctuation\">..</span>.\nServerless: Checking Stack update progress<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>.\nServerless: Stack update finished<span class=\"token punctuation\">..</span>.\nService Information\nservice: aws-python3\nstage: dev\nregion: us-east-1\nstack: aws-python3-dev\nresources: 5\napi keys:\nNone\nendpoints:\nNone\nfunctions:\nhello: aws-python3-dev-hello\nlayers:\nNone</code></pre></div>\n</li>\n<li>\n<p>Add a profile\nYes. Do add a profile so that next time you create a similar kind of project, you will not have to enter in your api keys again.</p>\n</li>\n<li>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/cli-chap-install.html\">install <code class=\"language-text\">awscli</code></a> (if this does not work, use <a href=\"https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/install-bundle.html\">bundle installer.</a> If the install command <a href=\"https://github.com/MeetMe/newrelic-plugin-agent/issues/151\">breaks with an error, perhaps run <code class=\"language-text\">apt-get install</code>apt-get install python-dev`</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> awscli --upgrade --user</code></pre></div>\n</li>\n<li>\n<p><a href=\"https://serverless.com/framework/docs/providers/aws/cli-reference/config-credentials/\">initialize a profile</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless config credentials --provider aws --key 1234 --secret 5678 --profile custom-profile</code></pre></div>\n</li>\n<li>\n<p>Later on, you can use this profile in this way:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless deploy --aws-profile profileIjustMade</code></pre></div>\n<p>of course you can modify your profile info and api keys in <code class=\"language-text\">~/.aws/credentials</code>.</p>\n</li>\n</ol>\n<h1>Check your function is working</h1>\n<p>First, set a function name in <code class=\"language-text\">serverless.yml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">functions:\n  hello:\n    handler: handler.hello\n    name: hello</code></pre></div>\n<p>Then <code class=\"language-text\">sls deploy</code> again to make changes.\nNow, </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ serverless invoke -f hello\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"statusCode\"</span><span class=\"token keyword\">:</span> 200,\n    <span class=\"token string\">\"body\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"{\\\"message\\\": \\\"Go Serverless v1.0! Your function executed successfully!\\\", \\\"input\\\": {}}\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>yes, it works!!</p>\n<h1>Want to include python modules? Make a <a href=\"https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/lambda-python-how-to-create-deployment-package.html\">deployment package.</a></h1>\n<blockquote>\n<p><strong>A deployment package is a ZIP archive that contains your function code and dependencies.</strong> </p>\n</blockquote>\n<blockquote>\n<p>You need to create a deployment package if you use the Lambda API to manage functions, or <strong>if your code uses libraries other than the AWS SDK.</strong> Other libraries and dependencies need to be included in the deployment package. You can upload the package directly to Lambda, or you can use an Amazon S3 bucket, and then upload it to Lambda.</p>\n</blockquote>\n<ol>\n<li>\n<p>First, you would need to have aws cli installed. If you have not, check above for steps. </p>\n</li>\n<li>\n<p>Then install dependencies to a local directory with pip, and include them in your deployment package.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">j031:~/workspace <span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span> $ <span class=\"token function\">mkdir</span> packages\nj031:~/workspace <span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span> $ <span class=\"token function\">cd</span> packages/\nj031:~/workspace/packages <span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span> $ <span class=\"token function\">ls</span>\nj031:~/workspace/packages <span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span> $ pip <span class=\"token function\">install</span> requests --target <span class=\"token keyword\">.</span></code></pre></div>\n</li>\n<li>\n<p>Create zip of packages </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ zip -r9 ../function.zip .</code></pre></div>\n</li>\n<li>\n<p>Add function code to the zip</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">j031:~/workspace/es (master) $ zip -g function.zip handler.py\nadding: handler.py (deflated 50%)</code></pre></div>\n</li>\n<li>\n<p>Upload!</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">j031:~/workspace/es (master) $ aws lambda update-function-code --function-name crawler --zip-file fileb://function.zip</code></pre></div>\n</li>\n<li>\n<p>If you feel tiredsome, just create <code class=\"language-text\">update.sh</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">mkdir .tmp\nzip -r9 ./.tmp/function.zip ./packages\nzip -g ./.tmp/function.zip handler.py\naws lambda update-function-code --function-name crawler --zip-file fileb://./.tmp/function.zip\nrm -rf ./.tmp</code></pre></div>\n</li>\n</ol>\n<h1>OR use serverless-python-requirements</h1>\n<p><a href=\"https://github.com/UnitedIncome/serverless-python-requirements\">Just install it</a>, and produce <code class=\"language-text\">requirements.txt</code> by running <code class=\"language-text\">pip freeze &gt; requirements.txt</code> and run <code class=\"language-text\">sls deploy</code>.\n<em>I find this way very much simpler and easier!</em></p>\n<h1>Source code</h1>\n<p><a href=\"https://github.com/9oelM/es\">The source code can be found from this repo!</a></p>","frontmatter":{"title":"Deploying a serverless crawler with python + lambda + dynamoDB","date":"March 13, 2019"}}},"pageContext":{"slug":"/2019-03-17--deploying-a-serverless-crawler-with-python-+-lambda+dynamoDB/","previous":{"fields":{"slug":"/2019-03-09--100BooksProject-(1):Remember-Who-You-Are:-Life-Stories-That-Inspire-the-Heart-and-Mind/"},"frontmatter":{"title":"100 Books Project (1): Reflection and reading notes on Remember Who You Are: Life Stories That Inspire the Heart and Mind"}},"next":{"fields":{"slug":"/2019-03-13--100BooksProject-(2):Crossroads-(ê°ˆë¦¼ê¸¸)/"},"frontmatter":{"title":"100 Books Project (2): Crossroads (ê°ˆë¦¼ê¸¸)"}}}}